{"file_contents":{"client/src/components/product-card.tsx":{"content":"import { useState } from \"react\";\nimport { Edit, Trash2, QrCode, Package, TrendingUp } from \"lucide-react\";\nimport { Card, CardContent, CardFooter } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ProductDialog } from \"./product-dialog\";\nimport { QRCodeDialog } from \"./qr-code-dialog\";\nimport { DeleteProductDialog } from \"./delete-product-dialog\";\nimport { StockMovementDialog } from \"./stock-movement-dialog\";\nimport type { Product } from \"@shared/schema\";\n\ninterface ProductCardProps {\n  product: Product;\n  viewMode: \"grid\" | \"list\";\n}\n\nexport function ProductCard({ product, viewMode }: ProductCardProps) {\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [isQRDialogOpen, setIsQRDialogOpen] = useState(false);\n  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);\n  const [isStockDialogOpen, setIsStockDialogOpen] = useState(false);\n\n  const stockStatus =\n    product.stockQuantity === 0\n      ? \"out\"\n      : product.stockQuantity < 10\n        ? \"low\"\n        : \"in\";\n\n  if (viewMode === \"list\") {\n    return (\n      <>\n        <Card className=\"hover-elevate\" data-testid={`card-product-${product.id}`}>\n          <CardContent className=\"p-6\">\n            <div className=\"flex items-center gap-6\">\n              <div className=\"w-20 h-20 rounded-md bg-muted flex items-center justify-center overflow-hidden flex-shrink-0\">\n                {product.productImage ? (\n                  <img\n                    src={product.productImage}\n                    alt={product.productName}\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <Package className=\"h-8 w-8 text-muted-foreground\" />\n                )}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-start gap-3 mb-2\">\n                  <h3 className=\"font-semibold text-lg truncate\" data-testid={`text-product-name-${product.id}`}>\n                    {product.productName}\n                  </h3>\n                  <Badge\n                    variant={stockStatus === \"out\" ? \"destructive\" : stockStatus === \"low\" ? \"secondary\" : \"default\"}\n                    className=\"flex-shrink-0\"\n                    data-testid={`badge-stock-${product.id}`}\n                  >\n                    {stockStatus === \"out\" ? \"Out of Stock\" : `${product.stockQuantity} in stock`}\n                  </Badge>\n                </div>\n                <div className=\"flex flex-wrap gap-2 text-sm text-muted-foreground\">\n                  <span className=\"font-mono\" data-testid={`text-sku-${product.id}`}>SKU: {product.sku}</span>\n                  <span>•</span>\n                  <span data-testid={`text-brand-${product.id}`}>{product.brand}</span>\n                  <span>•</span>\n                  <span data-testid={`text-category-${product.id}`}>{product.category}</span>\n                  <span>•</span>\n                  <span>{product.size}</span>\n                  <span>•</span>\n                  <span>{product.color}</span>\n                </div>\n              </div>\n              <div className=\"flex items-center gap-3 flex-shrink-0\">\n                <div className=\"text-right\">\n                  <div className=\"text-2xl font-bold\" data-testid={`text-price-${product.id}`}>${product.price}</div>\n                  {product.costPrice && (\n                    <div className=\"text-xs text-muted-foreground\">Cost: ${product.costPrice}</div>\n                  )}\n                </div>\n                <div className=\"flex gap-1\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    onClick={() => setIsStockDialogOpen(true)}\n                    data-testid={`button-stock-${product.id}`}\n                    title=\"Manage Stock\"\n                  >\n                    <TrendingUp className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    onClick={() => setIsQRDialogOpen(true)}\n                    data-testid={`button-qr-${product.id}`}\n                  >\n                    <QrCode className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    onClick={() => setIsEditDialogOpen(true)}\n                    data-testid={`button-edit-${product.id}`}\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"icon\"\n                    onClick={() => setIsDeleteDialogOpen(true)}\n                    data-testid={`button-delete-${product.id}`}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <ProductDialog\n          open={isEditDialogOpen}\n          onOpenChange={setIsEditDialogOpen}\n          product={product}\n        />\n        <QRCodeDialog\n          open={isQRDialogOpen}\n          onOpenChange={setIsQRDialogOpen}\n          product={product}\n        />\n        <StockMovementDialog\n          open={isStockDialogOpen}\n          onOpenChange={setIsStockDialogOpen}\n          product={product}\n        />\n        <DeleteProductDialog\n          open={isDeleteDialogOpen}\n          onOpenChange={setIsDeleteDialogOpen}\n          product={product}\n        />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Card className=\"group overflow-hidden hover-elevate\" data-testid={`card-product-${product.id}`}>\n        <div className=\"aspect-square bg-muted relative overflow-hidden\">\n          {product.productImage ? (\n            <img\n              src={product.productImage}\n              alt={product.productName}\n              className=\"w-full h-full object-cover\"\n            />\n          ) : (\n            <div className=\"w-full h-full flex items-center justify-center\">\n              <Package className=\"h-16 w-16 text-muted-foreground\" />\n            </div>\n          )}\n          <Badge\n            variant={stockStatus === \"out\" ? \"destructive\" : stockStatus === \"low\" ? \"secondary\" : \"default\"}\n            className=\"absolute top-3 right-3\"\n            data-testid={`badge-stock-${product.id}`}\n          >\n            {stockStatus === \"out\" ? \"Out\" : product.stockQuantity}\n          </Badge>\n        </div>\n        <CardContent className=\"p-6\">\n          <h3 className=\"font-semibold text-lg mb-2 line-clamp-2\" data-testid={`text-product-name-${product.id}`}>\n            {product.productName}\n          </h3>\n          <div className=\"space-y-1 text-sm text-muted-foreground mb-3\">\n            <p className=\"font-mono\" data-testid={`text-sku-${product.id}`}>SKU: {product.sku}</p>\n            <p data-testid={`text-brand-${product.id}`}>{product.brand} • {product.category}</p>\n            <p>{product.size} • {product.color}</p>\n          </div>\n          <div className=\"text-2xl font-bold\" data-testid={`text-price-${product.id}`}>${product.price}</div>\n          {product.costPrice && (\n            <div className=\"text-xs text-muted-foreground mt-1\">Cost: ${product.costPrice}</div>\n          )}\n        </CardContent>\n        <CardFooter className=\"p-6 pt-0 flex gap-2\">\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"flex-1\"\n            onClick={() => setIsStockDialogOpen(true)}\n            data-testid={`button-stock-${product.id}`}\n          >\n            <TrendingUp className=\"h-4 w-4 mr-2\" />\n            Stock\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => setIsQRDialogOpen(true)}\n            data-testid={`button-qr-${product.id}`}\n          >\n            <QrCode className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => setIsEditDialogOpen(true)}\n            data-testid={`button-edit-${product.id}`}\n          >\n            <Edit className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={() => setIsDeleteDialogOpen(true)}\n            data-testid={`button-delete-${product.id}`}\n          >\n            <Trash2 className=\"h-4 w-4\" />\n          </Button>\n        </CardFooter>\n      </Card>\n\n      <ProductDialog\n        open={isEditDialogOpen}\n        onOpenChange={setIsEditDialogOpen}\n        product={product}\n      />\n      <QRCodeDialog\n        open={isQRDialogOpen}\n        onOpenChange={setIsQRDialogOpen}\n        product={product}\n      />\n      <StockMovementDialog\n        open={isStockDialogOpen}\n        onOpenChange={setIsStockDialogOpen}\n        product={product}\n      />\n      <DeleteProductDialog\n        open={isDeleteDialogOpen}\n        onOpenChange={setIsDeleteDialogOpen}\n        product={product}\n      />\n    </>\n  );\n}\n","size_bytes":9160},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/stock-movement-dialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { Package, TrendingUp, TrendingDown, RefreshCw, Clock } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { insertStockMovementSchema, type Product, type InsertStockMovement } from \"@shared/schema\";\nimport { z } from \"zod\";\n\ninterface StockMovementDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  product?: Product | null;\n}\n\nexport function StockMovementDialog({ open, onOpenChange, product }: StockMovementDialogProps) {\n  const [selectedProductId, setSelectedProductId] = useState<string>(\"\");\n  const { toast } = useToast();\n\n  // Auto-select scanned product\n  useEffect(() => {\n    if (product && open) {\n      setSelectedProductId(product.id);\n      form.setValue(\"productId\", product.id);\n    }\n  }, [product, open]);\n\n  const form = useForm<InsertStockMovement>({\n    resolver: zodResolver(insertStockMovementSchema),\n    defaultValues: {\n      productId: product?.id || \"\",\n      productName: product?.productName || \"\",\n      sku: product?.sku || \"\",\n      type: \"in\",\n      quantity: 1,\n      reason: \"\",\n      notes: \"\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertStockMovement) => {\n      return await apiRequest(\"POST\", \"/api/stock-movements\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/stock-movements\"] });\n      toast({\n        title: \"Success\",\n        description: \"Stock movement recorded successfully\",\n      });\n      onOpenChange(false);\n      form.reset();\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to record stock movement. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertStockMovement) => {\n    createMutation.mutate(data);\n  };\n\n  const movementType = form.watch(\"type\");\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl\" data-testid=\"dialog-stock-movement\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">Record Stock Movement</DialogTitle>\n          <DialogDescription>\n            Add, remove, or adjust stock quantities for this product\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n          {product && (\n            <div className=\"p-4 bg-muted rounded-lg\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"w-16 h-16 rounded-md bg-background flex items-center justify-center overflow-hidden flex-shrink-0\">\n                  {product.productImage ? (\n                    <img\n                      src={product.productImage}\n                      alt={product.productName}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <Package className=\"h-8 w-8 text-muted-foreground\" />\n                  )}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <h3 className=\"font-semibold text-lg\" data-testid=\"text-product-name\">\n                    {product.productName}\n                  </h3>\n                  <p className=\"text-sm text-muted-foreground font-mono\">SKU: {product.sku}</p>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Current Stock: <span className=\"font-semibold\">{product.stockQuantity}</span> units\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"type\">Movement Type *</Label>\n            <Select\n              value={form.watch(\"type\")}\n              onValueChange={(value) => form.setValue(\"type\", value as any)}\n            >\n              <SelectTrigger id=\"type\" data-testid=\"select-type\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"in\">\n                  <div className=\"flex items-center gap-2\">\n                    <TrendingUp className=\"h-4 w-4 text-green-600\" />\n                    <span>Stock In (Add)</span>\n                  </div>\n                </SelectItem>\n                <SelectItem value=\"out\">\n                  <div className=\"flex items-center gap-2\">\n                    <TrendingDown className=\"h-4 w-4 text-red-600\" />\n                    <span>Stock Out (Remove)</span>\n                  </div>\n                </SelectItem>\n                <SelectItem value=\"adjustment\">\n                  <div className=\"flex items-center gap-2\">\n                    <RefreshCw className=\"h-4 w-4 text-blue-600\" />\n                    <span>Adjustment (Set to)</span>\n                  </div>\n                </SelectItem>\n              </SelectContent>\n            </Select>\n            {form.formState.errors.type && (\n              <p className=\"text-sm text-destructive\">{form.formState.errors.type.message}</p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"quantity\">\n              {movementType === \"adjustment\" ? \"New Quantity *\" : \"Quantity *\"}\n            </Label>\n            <Input\n              id=\"quantity\"\n              {...form.register(\"quantity\", { valueAsNumber: true })}\n              type=\"number\"\n              min=\"1\"\n              placeholder=\"0\"\n              data-testid=\"input-quantity\"\n            />\n            {form.formState.errors.quantity && (\n              <p className=\"text-sm text-destructive\">{form.formState.errors.quantity.message}</p>\n            )}\n            {product && movementType !== \"adjustment\" && (\n              <p className=\"text-sm text-muted-foreground\">\n                {movementType === \"in\" && `New stock will be: ${product.stockQuantity + (form.watch(\"quantity\") || 0)} units`}\n                {movementType === \"out\" && `New stock will be: ${Math.max(0, product.stockQuantity - (form.watch(\"quantity\") || 0))} units`}\n              </p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"reason\">Reason *</Label>\n            <Select\n              value={form.watch(\"reason\")}\n              onValueChange={(value) => form.setValue(\"reason\", value)}\n            >\n              <SelectTrigger id=\"reason\" data-testid=\"select-reason\">\n                <SelectValue placeholder=\"Select reason\" />\n              </SelectTrigger>\n              <SelectContent>\n                {movementType === \"in\" && (\n                  <>\n                    <SelectItem value=\"Purchase\">New Purchase</SelectItem>\n                    <SelectItem value=\"Return\">Customer Return</SelectItem>\n                    <SelectItem value=\"Transfer In\">Transfer In</SelectItem>\n                  </>\n                )}\n                {movementType === \"out\" && (\n                  <>\n                    <SelectItem value=\"Sale\">Sale</SelectItem>\n                    <SelectItem value=\"Damaged\">Damaged/Defective</SelectItem>\n                    <SelectItem value=\"Transfer Out\">Transfer Out</SelectItem>\n                    <SelectItem value=\"Lost\">Lost/Stolen</SelectItem>\n                  </>\n                )}\n                {movementType === \"adjustment\" && (\n                  <>\n                    <SelectItem value=\"Physical Count\">Physical Count</SelectItem>\n                    <SelectItem value=\"Correction\">Correction</SelectItem>\n                    <SelectItem value=\"Initial Stock\">Initial Stock</SelectItem>\n                  </>\n                )}\n              </SelectContent>\n            </Select>\n            {form.formState.errors.reason && (\n              <p className=\"text-sm text-destructive\">{form.formState.errors.reason.message}</p>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Notes (Optional)</Label>\n            <Textarea\n              id=\"notes\"\n              {...form.register(\"notes\")}\n              placeholder=\"Add any additional details...\"\n              rows={3}\n              data-testid=\"input-notes\"\n            />\n          </div>\n\n          <div className=\"border-t pt-4\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-4\">\n              <Clock className=\"h-4 w-4\" />\n              <span>Recorded at: {format(new Date(), \"MMM dd, yyyy HH:mm:ss\")}</span>\n            </div>\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => {\n                  onOpenChange(false);\n                  form.reset();\n                }}\n                disabled={createMutation.isPending}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={createMutation.isPending}\n                data-testid=\"button-submit\"\n              >\n                {createMutation.isPending ? \"Recording...\" : \"Record Movement\"}\n              </Button>\n            </div>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":10025},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/create-order-dialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { X, Plus, Search, Package, Scan, Clock } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { insertOrderSchema, type Product, type InsertOrder } from \"@shared/schema\";\nimport { QRScannerDialog } from \"./qr-scanner-dialog\";\n\ninterface OrderItem {\n  productId: string;\n  productName: string;\n  sku: string;\n  unitPrice: string;\n  quantity: number;\n  subtotal: string;\n}\n\ninterface CreateOrderDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  initialProduct?: Product | null;\n}\n\nexport function CreateOrderDialog({ open, onOpenChange, initialProduct }: CreateOrderDialogProps) {\n  const [orderItems, setOrderItems] = useState<OrderItem[]>([]);\n  const [searchOpen, setSearchOpen] = useState(false);\n  const [scannerOpen, setScannerOpen] = useState(false);\n  const { toast } = useToast();\n\n  // Auto-add scanned product\n  useEffect(() => {\n    if (initialProduct && open) {\n      addProduct(initialProduct);\n    }\n  }, [initialProduct, open]);\n\n  const { data: products = [] } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  const form = useForm<InsertOrder>({\n    resolver: zodResolver(insertOrderSchema),\n    defaultValues: {\n      customerName: \"\",\n      customerEmail: \"\",\n      customerPhone: \"\",\n      status: \"pending\",\n      notes: \"\",\n      totalAmount: \"0\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertOrder & { items: OrderItem[] }) => {\n      return await apiRequest(\"POST\", \"/api/orders\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/orders\"] });\n      toast({\n        title: \"Success\",\n        description: \"Order created successfully\",\n      });\n      onOpenChange(false);\n      form.reset();\n      setOrderItems([]);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create order. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const addProduct = (product: Product) => {\n    const existingItem = orderItems.find((item) => item.productId === product.id);\n    if (existingItem) {\n      updateQuantity(product.id, existingItem.quantity + 1);\n      toast({\n        title: \"Product Updated\",\n        description: `${product.productName} quantity increased to ${existingItem.quantity + 1}`,\n      });\n    } else {\n      const newItem: OrderItem = {\n        productId: product.id,\n        productName: product.productName,\n        sku: product.sku,\n        unitPrice: product.price,\n        quantity: 1,\n        subtotal: product.price,\n      };\n      setOrderItems([...orderItems, newItem]);\n      toast({\n        title: \"Product Added\",\n        description: `${product.productName} added to order`,\n      });\n    }\n    setSearchOpen(false);\n  };\n\n  const updateQuantity = (productId: string, quantity: number) => {\n    if (quantity < 1) return;\n    setOrderItems(\n      orderItems.map((item) =>\n        item.productId === productId\n          ? {\n              ...item,\n              quantity,\n              subtotal: (parseFloat(item.unitPrice) * quantity).toFixed(2),\n            }\n          : item\n      )\n    );\n  };\n\n  const removeItem = (productId: string) => {\n    setOrderItems(orderItems.filter((item) => item.productId !== productId));\n  };\n\n  const calculateTotal = () => {\n    return orderItems.reduce((sum, item) => sum + parseFloat(item.subtotal), 0).toFixed(2);\n  };\n\n  const onSubmit = (data: InsertOrder) => {\n    if (orderItems.length === 0) {\n      toast({\n        title: \"Error\",\n        description: \"Please add at least one product to the order\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const total = calculateTotal();\n    createMutation.mutate({\n      ...data,\n      totalAmount: total,\n      items: orderItems,\n    });\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\" data-testid=\"dialog-create-order\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">Create New Order</DialogTitle>\n          <DialogDescription>\n            Fill in customer details and add products to create a new order\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <h3 className=\"font-semibold text-lg\">Customer Information</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"customerName\">Customer Name *</Label>\n                <Input\n                  id=\"customerName\"\n                  {...form.register(\"customerName\")}\n                  placeholder=\"John Doe\"\n                  data-testid=\"input-customer-name\"\n                />\n                {form.formState.errors.customerName && (\n                  <p className=\"text-sm text-destructive\">{form.formState.errors.customerName.message}</p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"customerEmail\">Email</Label>\n                <Input\n                  id=\"customerEmail\"\n                  {...form.register(\"customerEmail\")}\n                  type=\"email\"\n                  placeholder=\"john@example.com\"\n                  data-testid=\"input-customer-email\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"customerPhone\">Phone</Label>\n                <Input\n                  id=\"customerPhone\"\n                  {...form.register(\"customerPhone\")}\n                  placeholder=\"+1 234 567 8900\"\n                  data-testid=\"input-customer-phone\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"status\">Status</Label>\n                <Select\n                  value={form.watch(\"status\")}\n                  onValueChange={(value) => form.setValue(\"status\", value as any)}\n                >\n                  <SelectTrigger id=\"status\" data-testid=\"select-status\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"pending\">Pending</SelectItem>\n                    <SelectItem value=\"processing\">Processing</SelectItem>\n                    <SelectItem value=\"shipped\">Shipped</SelectItem>\n                    <SelectItem value=\"delivered\">Delivered</SelectItem>\n                    <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"font-semibold text-lg\">Products</h3>\n              <div className=\"flex gap-2\">\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  onClick={() => setScannerOpen(true)}\n                  data-testid=\"button-scan-product\"\n                >\n                  <Scan className=\"h-4 w-4 mr-2\" />\n                  Scan Product\n                </Button>\n                <Popover open={searchOpen} onOpenChange={setSearchOpen}>\n                  <PopoverTrigger asChild>\n                    <Button type=\"button\" variant=\"outline\" data-testid=\"button-add-product\">\n                      <Plus className=\"h-4 w-4 mr-2\" />\n                      Add Product\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-[400px] p-0\" align=\"end\">\n                    <Command>\n                      <CommandInput placeholder=\"Search products...\" />\n                      <CommandList>\n                        <CommandEmpty>No products found.</CommandEmpty>\n                        <CommandGroup>\n                          {products.map((product) => (\n                            <CommandItem\n                              key={product.id}\n                              onSelect={() => addProduct(product)}\n                              data-testid={`command-item-${product.id}`}\n                            >\n                              <div className=\"flex items-center gap-3 w-full\">\n                                <div className=\"w-10 h-10 rounded bg-muted flex items-center justify-center overflow-hidden flex-shrink-0\">\n                                  {product.productImage ? (\n                                    <img\n                                      src={product.productImage}\n                                      alt={product.productName}\n                                      className=\"w-full h-full object-cover\"\n                                    />\n                                  ) : (\n                                    <Package className=\"h-5 w-5 text-muted-foreground\" />\n                                  )}\n                                </div>\n                                <div className=\"flex-1 min-w-0\">\n                                  <p className=\"font-medium truncate\">{product.productName}</p>\n                                  <p className=\"text-xs text-muted-foreground\">{product.sku}</p>\n                                </div>\n                                <p className=\"font-semibold\">${product.price}</p>\n                              </div>\n                            </CommandItem>\n                          ))}\n                        </CommandGroup>\n                      </CommandList>\n                    </Command>\n                  </PopoverContent>\n                </Popover>\n              </div>\n            </div>\n\n            {orderItems.length === 0 ? (\n              <Card className=\"border-dashed\">\n                <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                  <div className=\"rounded-full bg-muted p-6 mb-4\">\n                    <Package className=\"h-10 w-10 text-muted-foreground\" />\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\" data-testid=\"text-no-items\">\n                    No products added yet\n                  </p>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card>\n                <CardContent className=\"p-0\">\n                  <div className=\"divide-y\">\n                    {orderItems.map((item, index) => (\n                      <div key={item.productId} className=\"p-4\" data-testid={`order-item-${index}`}>\n                        <div className=\"flex items-center gap-4\">\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"font-medium\">{item.productName}</p>\n                            <p className=\"text-sm text-muted-foreground font-mono\">{item.sku}</p>\n                          </div>\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"flex items-center gap-2\">\n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"icon\"\n                                className=\"h-8 w-8\"\n                                onClick={() => updateQuantity(item.productId, item.quantity - 1)}\n                                data-testid={`button-decrease-qty-${index}`}\n                              >\n                                -\n                              </Button>\n                              <span className=\"w-12 text-center font-medium\" data-testid={`text-qty-${index}`}>\n                                {item.quantity}\n                              </span>\n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"icon\"\n                                className=\"h-8 w-8\"\n                                onClick={() => updateQuantity(item.productId, item.quantity + 1)}\n                                data-testid={`button-increase-qty-${index}`}\n                              >\n                                +\n                              </Button>\n                            </div>\n                            <p className=\"font-semibold w-20 text-right\" data-testid={`text-subtotal-${index}`}>\n                              ${item.subtotal}\n                            </p>\n                            <Button\n                              type=\"button\"\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              onClick={() => removeItem(item.productId)}\n                              data-testid={`button-remove-item-${index}`}\n                            >\n                              <X className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"p-4 bg-muted/50 border-t flex items-center justify-between\">\n                    <p className=\"font-semibold text-lg\">Total</p>\n                    <p className=\"font-bold text-2xl\" data-testid=\"text-order-total\">\n                      ${calculateTotal()}\n                    </p>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Order Notes</Label>\n            <Textarea\n              id=\"notes\"\n              {...form.register(\"notes\")}\n              placeholder=\"Add any special instructions or notes...\"\n              rows={3}\n              data-testid=\"input-notes\"\n            />\n          </div>\n\n          <div className=\"border-t pt-4\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-4\">\n              <Clock className=\"h-4 w-4\" />\n              <span>Order Date: {format(new Date(), \"MMM dd, yyyy HH:mm:ss\")}</span>\n            </div>\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => {\n                  onOpenChange(false);\n                  form.reset();\n                  setOrderItems([]);\n                }}\n                disabled={createMutation.isPending}\n                data-testid=\"button-cancel\"\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={createMutation.isPending || orderItems.length === 0}\n                data-testid=\"button-submit\"\n              >\n                {createMutation.isPending ? \"Creating...\" : \"Create Order\"}\n              </Button>\n            </div>\n          </div>\n        </form>\n      </DialogContent>\n\n      <QRScannerDialog \n        open={scannerOpen} \n        onOpenChange={setScannerOpen}\n        onProductScanned={(product) => {\n          addProduct(product);\n          setScannerOpen(false);\n        }}\n      />\n    </Dialog>\n  );\n}\n","size_bytes":16215},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/footer.tsx":{"content":"\nimport { Package } from \"lucide-react\";\n\nexport function Footer() {\n  return (\n    <footer className=\"border-t bg-background py-4\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-center gap-2 text-sm text-muted-foreground\">\n          <span>Created by</span>\n          <div className=\"flex items-center gap-1.5 font-semibold text-foreground\">\n            <Package className=\"h-4 w-4 text-primary\" />\n            <span>Luphonix</span>\n          </div>\n        </div>\n      </div>\n    </footer>\n  );\n}\n","size_bytes":566},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, decimal, boolean, timestamp } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Products table\nexport const products = pgTable(\"products\", {\n  id: varchar(\"id\").primaryKey(),\n  productName: text(\"product_name\").notNull(),\n  sku: text(\"sku\").notNull().unique(),\n  category: text(\"category\").notNull(),\n  brand: text(\"brand\").notNull(),\n  description: text(\"description\"),\n  \n  // Variant details\n  color: text(\"color\").notNull(),\n  size: text(\"size\").notNull(),\n  fabric: text(\"fabric\"),\n  pattern: text(\"pattern\"),\n  gender: text(\"gender\").notNull(),\n  \n  // Pricing & Stock\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n  costPrice: decimal(\"cost_price\", { precision: 10, scale: 2 }),\n  stockQuantity: integer(\"stock_quantity\").notNull().default(0),\n  warehouse: text(\"warehouse\"),\n  \n  // Media\n  productImage: text(\"product_image\"),\n  galleryImages: text(\"gallery_images\").array(),\n  \n  // Metadata\n  isFeatured: boolean(\"is_featured\").default(false),\n  launchDate: timestamp(\"launch_date\"),\n  rating: decimal(\"rating\", { precision: 2, scale: 1 }),\n  tags: text(\"tags\").array(),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertProductSchema = createInsertSchema(products, {\n  productName: z.string().min(1, \"Product name is required\"),\n  sku: z.string().min(1, \"SKU is required\"),\n  category: z.string().min(1, \"Category is required\"),\n  brand: z.string().min(1, \"Brand is required\"),\n  color: z.string().min(1, \"Color is required\"),\n  size: z.string().min(1, \"Size is required\"),\n  gender: z.string().min(1, \"Gender is required\"),\n  price: z.string().min(1, \"Price is required\"),\n  stockQuantity: z.number().int().min(0, \"Stock quantity must be 0 or greater\"),\n  productImage: z.string().optional(),\n  galleryImages: z.array(z.string()).optional(),\n  rating: z.string().optional(),\n}).omit({ id: true, createdAt: true });\n\nexport type InsertProduct = z.infer<typeof insertProductSchema>;\nexport type Product = typeof products.$inferSelect;\n\n// Orders table\nexport const orders = pgTable(\"orders\", {\n  id: varchar(\"id\").primaryKey(),\n  orderNumber: text(\"order_number\").notNull().unique(),\n  customerName: text(\"customer_name\").notNull(),\n  customerEmail: text(\"customer_email\"),\n  customerPhone: text(\"customer_phone\"),\n  status: text(\"status\").notNull().default(\"pending\"),\n  notes: text(\"notes\"),\n  totalAmount: decimal(\"total_amount\", { precision: 10, scale: 2 }).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Order items table\nexport const orderItems = pgTable(\"order_items\", {\n  id: varchar(\"id\").primaryKey(),\n  orderId: varchar(\"order_id\").notNull(),\n  productId: varchar(\"product_id\").notNull(),\n  productName: text(\"product_name\").notNull(),\n  sku: text(\"sku\").notNull(),\n  quantity: integer(\"quantity\").notNull(),\n  unitPrice: decimal(\"unit_price\", { precision: 10, scale: 2 }).notNull(),\n  subtotal: decimal(\"subtotal\", { precision: 10, scale: 2 }).notNull(),\n});\n\nexport const insertOrderSchema = createInsertSchema(orders, {\n  customerName: z.string().min(1, \"Customer name is required\"),\n  customerEmail: z.string().email().optional().or(z.literal(\"\")),\n  status: z.enum([\"pending\", \"processing\", \"shipped\", \"delivered\", \"cancelled\"]),\n  totalAmount: z.string().min(1, \"Total amount is required\"),\n}).omit({ id: true, createdAt: true, orderNumber: true });\n\nexport const insertOrderItemSchema = createInsertSchema(orderItems, {\n  quantity: z.number().int().min(1, \"Quantity must be at least 1\"),\n}).omit({ id: true, orderId: true });\n\nexport type InsertOrder = z.infer<typeof insertOrderSchema>;\nexport type Order = typeof orders.$inferSelect;\nexport type InsertOrderItem = z.infer<typeof insertOrderItemSchema>;\nexport type OrderItem = typeof orderItems.$inferSelect;\n\n// Combined order with items type\nexport type OrderWithItems = Order & {\n  items: OrderItem[];\n};\n\n// Stock movements table\nexport const stockMovements = pgTable(\"stock_movements\", {\n  id: varchar(\"id\").primaryKey(),\n  productId: varchar(\"product_id\").notNull(),\n  productName: text(\"product_name\").notNull(),\n  sku: text(\"sku\").notNull(),\n  type: text(\"type\").notNull(), // 'in' | 'out' | 'adjustment'\n  quantity: integer(\"quantity\").notNull(),\n  reason: text(\"reason\").notNull(),\n  notes: text(\"notes\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertStockMovementSchema = createInsertSchema(stockMovements, {\n  productId: z.string().min(1, \"Product ID is required\"),\n  productName: z.string().min(1, \"Product name is required\"),\n  sku: z.string().min(1, \"SKU is required\"),\n  type: z.enum([\"in\", \"out\", \"adjustment\"]),\n  quantity: z.number().int().min(1, \"Quantity must be at least 1\"),\n  reason: z.string().min(1, \"Reason is required\"),\n}).omit({ id: true, createdAt: true });\n\nexport type InsertStockMovement = z.infer<typeof insertStockMovementSchema>;\nexport type StockMovement = typeof stockMovements.$inferSelect;\n\n// Returns table\nexport const returns = pgTable(\"returns\", {\n  id: varchar(\"id\").primaryKey(),\n  returnNumber: text(\"return_number\").notNull().unique(),\n  orderId: varchar(\"order_id\").notNull(),\n  orderNumber: text(\"order_number\").notNull(),\n  customerName: text(\"customer_name\").notNull(),\n  customerEmail: text(\"customer_email\"),\n  status: text(\"status\").notNull().default(\"pending\"), // 'pending' | 'approved' | 'rejected' | 'completed'\n  reason: text(\"reason\").notNull(),\n  notes: text(\"notes\"),\n  refundAmount: decimal(\"refund_amount\", { precision: 10, scale: 2 }),\n  creditAmount: decimal(\"credit_amount\", { precision: 10, scale: 2 }),\n  exchangeValue: decimal(\"exchange_value\", { precision: 10, scale: 2 }),\n  additionalPayment: decimal(\"additional_payment\", { precision: 10, scale: 2 }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// Return items table\nexport const returnItems = pgTable(\"return_items\", {\n  id: varchar(\"id\").primaryKey(),\n  returnId: varchar(\"return_id\").notNull(),\n  productId: varchar(\"product_id\").notNull(),\n  productName: text(\"product_name\").notNull(),\n  sku: text(\"sku\").notNull(),\n  quantity: integer(\"quantity\").notNull(),\n  unitPrice: decimal(\"unit_price\", { precision: 10, scale: 2 }).notNull(),\n  subtotal: decimal(\"subtotal\", { precision: 10, scale: 2 }).notNull(),\n  exchangeProductId: varchar(\"exchange_product_id\"),\n  exchangeProductName: text(\"exchange_product_name\"),\n});\n\nexport const insertReturnSchema = createInsertSchema(returns, {\n  customerName: z.string().min(1, \"Customer name is required\"),\n  customerEmail: z.string().email().optional().or(z.literal(\"\")),\n  status: z.enum([\"pending\", \"approved\", \"rejected\", \"completed\"]),\n  reason: z.string().min(1, \"Return reason is required\"),\n}).omit({ id: true, createdAt: true, returnNumber: true });\n\nexport const insertReturnItemSchema = createInsertSchema(returnItems, {\n  exchangeProductId: z.string().optional().or(z.literal(\"\")),\n  exchangeProductName: z.string().optional().or(z.literal(\"\")),\n}).omit({ \n  id: true, \n  returnId: true \n});\n\nexport type InsertReturn = z.infer<typeof insertReturnSchema>;\nexport type Return = typeof returns.$inferSelect;\nexport type InsertReturnItem = z.infer<typeof insertReturnItemSchema>;\nexport type ReturnItem = typeof returnItems.$inferSelect;\n\nexport type ReturnWithItems = Return & {\n  items: ReturnItem[];\n};\n\n// Discount codes table\nexport const discountCodes = pgTable(\"discount_codes\", {\n  id: varchar(\"id\").primaryKey(),\n  code: text(\"code\").notNull().unique(),\n  customerEmail: text(\"customer_email\").notNull(),\n  amount: decimal(\"amount\", { precision: 10, scale: 2 }).notNull(),\n  isUsed: boolean(\"is_used\").default(false),\n  usedAt: timestamp(\"used_at\"),\n  expiresAt: timestamp(\"expires_at\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertDiscountCodeSchema = createInsertSchema(discountCodes, {\n  code: z.string().min(1, \"Code is required\"),\n  customerEmail: z.string().email(\"Valid email is required\"),\n  amount: z.string().min(1, \"Amount is required\"),\n}).omit({ id: true, createdAt: true });\n\nexport type InsertDiscountCode = z.infer<typeof insertDiscountCodeSchema>;\nexport type DiscountCode = typeof discountCodes.$inferSelect;\n","size_bytes":8275},"server/storage.ts":{"content":"import {\n  products,\n  orders,\n  orderItems,\n  stockMovements,\n  returns,\n  returnItems,\n  discountCodes,\n  type Product,\n  type InsertProduct,\n  type Order,\n  type InsertOrder,\n  type OrderItem,\n  type InsertOrderItem,\n  type OrderWithItems,\n  type StockMovement,\n  type InsertStockMovement,\n  type Return,\n  type InsertReturn,\n  type ReturnItem,\n  type InsertReturnItem,\n  type ReturnWithItems,\n  type DiscountCode,\n  type InsertDiscountCode,\n} from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\nimport { sql, eq } from \"drizzle-orm\";\nimport { db } from \"./db\";\n\n\nexport interface IStorage {\n  // Products\n  getProducts(): Promise<Product[]>;\n  getProduct(id: string): Promise<Product | undefined>;\n  getProductBySKU(sku: string): Promise<Product | undefined>;\n  createProduct(product: InsertProduct): Promise<Product>;\n  updateProduct(id: string, product: InsertProduct): Promise<Product | undefined>;\n  deleteProduct(id: string): Promise<boolean>;\n\n  // Orders\n  getOrders(): Promise<OrderWithItems[]>;\n  getOrder(id: string): Promise<OrderWithItems | undefined>;\n  createOrder(order: InsertOrder, items: InsertOrderItem[]): Promise<OrderWithItems>;\n  updateOrder(id: string, order: InsertOrder): Promise<Order | undefined>;\n  deleteOrder(id: string): Promise<boolean>;\n\n  // Order Items\n  getOrderItems(orderId: string): Promise<OrderItem[]>;\n\n  // Stock Movements\n  getStockMovements(productId?: string): Promise<StockMovement[]>;\n  createStockMovement(movement: InsertStockMovement): Promise<StockMovement>;\n  getLowStockProducts(threshold?: number): Promise<Product[]>;\n\n  // Returns\n  getReturns(): Promise<ReturnWithItems[]>;\n  getReturn(id: string): Promise<ReturnWithItems | null>;\n  createReturn(data: InsertReturn, items: InsertReturnItem[]): Promise<ReturnWithItems>;\n  updateReturn(id: string, data: Partial<InsertReturn>): Promise<Return | null>;\n\n  // Discount Codes\n  getDiscountCodes(customerEmail?: string): Promise<DiscountCode[]>;\n  getDiscountCode(code: string): Promise<DiscountCode | null>;\n  createDiscountCode(data: InsertDiscountCode): Promise<DiscountCode>;\n  useDiscountCode(code: string): Promise<DiscountCode | null>;\n  deleteDiscountCode(id: string): Promise<boolean>;\n}\n\nexport class MemStorage implements IStorage {\n  private products: Map<string, Product>;\n  private orders: Map<string, Order>;\n  private orderItems: Map<string, OrderItem>;\n  private stockMovements: Map<string, StockMovement>;\n  private returns: Map<string, Return>;\n  private returnItems: Map<string, ReturnItem>;\n  private discountCodes: Map<string, DiscountCode>;\n\n  constructor() {\n    this.products = new Map();\n    this.orders = new Map();\n    this.orderItems = new Map();\n    this.stockMovements = new Map();\n    this.returns = new Map();\n    this.returnItems = new Map();\n    this.discountCodes = new Map();\n  }\n\n  // Products\n  async getProducts(): Promise<Product[]> {\n    return Array.from(this.products.values());\n  }\n\n  async getProduct(id: string): Promise<Product | undefined> {\n    return this.products.get(id);\n  }\n\n  async getProductBySKU(sku: string): Promise<Product | undefined> {\n    return Array.from(this.products.values()).find(\n      (product) => product.sku === sku\n    );\n  }\n\n  async createProduct(insertProduct: InsertProduct): Promise<Product> {\n    const id = randomUUID();\n    const product: Product = {\n      ...insertProduct,\n      id,\n      createdAt: new Date(),\n    };\n    this.products.set(id, product);\n    return product;\n  }\n\n  async updateProduct(\n    id: string,\n    insertProduct: InsertProduct\n  ): Promise<Product | undefined> {\n    const existing = this.products.get(id);\n    if (!existing) return undefined;\n\n    const updated: Product = {\n      ...insertProduct,\n      id,\n      createdAt: existing.createdAt,\n    };\n    this.products.set(id, updated);\n    return updated;\n  }\n\n  async deleteProduct(id: string): Promise<boolean> {\n    return this.products.delete(id);\n  }\n\n  // Orders\n  async getOrders(): Promise<OrderWithItems[]> {\n    const orders = Array.from(this.orders.values());\n    return Promise.all(\n      orders.map(async (order) => {\n        const items = await this.getOrderItems(order.id);\n        return { ...order, items };\n      })\n    );\n  }\n\n  async getOrder(id: string): Promise<OrderWithItems | undefined> {\n    const order = this.orders.get(id);\n    if (!order) return undefined;\n\n    const items = await this.getOrderItems(id);\n    return { ...order, items };\n  }\n\n  async createOrder(\n    insertOrder: InsertOrder,\n    insertItems: InsertOrderItem[]\n  ): Promise<OrderWithItems> {\n    const id = randomUUID();\n    const orderNumber = `ORD-${Date.now()}-${Math.floor(Math.random() * 1000).toString().padStart(3, \"0\")}`;\n\n    const order: Order = {\n      ...insertOrder,\n      id,\n      orderNumber,\n      createdAt: new Date(),\n    };\n    this.orders.set(id, order);\n\n    // Create order items\n    const items: OrderItem[] = insertItems.map((item) => {\n      const itemId = randomUUID();\n      const orderItem: OrderItem = {\n        ...item,\n        id: itemId,\n        orderId: id,\n      };\n      this.orderItems.set(itemId, orderItem);\n      return orderItem;\n    });\n\n    return { ...order, items };\n  }\n\n  async updateOrder(\n    id: string,\n    insertOrder: InsertOrder\n  ): Promise<Order | undefined> {\n    const existing = this.orders.get(id);\n    if (!existing) return undefined;\n\n    const updated: Order = {\n      ...insertOrder,\n      id,\n      orderNumber: existing.orderNumber,\n      createdAt: existing.createdAt,\n    };\n    this.orders.set(id, updated);\n    return updated;\n  }\n\n  async deleteOrder(id: string): Promise<boolean> {\n    // Delete order items first\n    const items = await this.getOrderItems(id);\n    items.forEach((item) => this.orderItems.delete(item.id));\n\n    // Delete order\n    return this.orders.delete(id);\n  }\n\n  // Order Items\n  async getOrderItems(orderId: string): Promise<OrderItem[]> {\n    return Array.from(this.orderItems.values()).filter(\n      (item) => item.orderId === orderId\n    );\n  }\n\n  // Stock Movements\n  async getStockMovements(productId?: string): Promise<StockMovement[]> {\n    const movements = Array.from(this.stockMovements.values());\n    if (productId) {\n      return movements.filter((m) => m.productId === productId);\n    }\n    return movements.sort((a, b) => {\n      const dateA = a.createdAt ? new Date(a.createdAt).getTime() : 0;\n      const dateB = b.createdAt ? new Date(b.createdAt).getTime() : 0;\n      return dateB - dateA;\n    });\n  }\n\n  async createStockMovement(insertMovement: InsertStockMovement): Promise<StockMovement> {\n    const id = randomUUID();\n    const movement: StockMovement = {\n      ...insertMovement,\n      id,\n      createdAt: new Date(),\n    };\n    this.stockMovements.set(id, movement);\n\n    // Update product stock quantity\n    const product = await this.getProduct(insertMovement.productId);\n    if (product) {\n      let newQuantity = product.stockQuantity;\n      if (insertMovement.type === \"in\") {\n        newQuantity += insertMovement.quantity;\n      } else if (insertMovement.type === \"out\") {\n        newQuantity -= insertMovement.quantity;\n      } else if (insertMovement.type === \"adjustment\") {\n        newQuantity = insertMovement.quantity;\n      }\n\n      await this.updateProduct(insertMovement.productId, {\n        ...product,\n        stockQuantity: Math.max(0, newQuantity),\n      });\n    }\n\n    return movement;\n  }\n\n  async getLowStockProducts(threshold: number = 10): Promise<Product[]> {\n    return Array.from(this.products.values()).filter(\n      (product) => product.stockQuantity < threshold && product.stockQuantity > 0\n    );\n  }\n\n  // Returns\n  async getReturns(): Promise<ReturnWithItems[]> {\n    const allReturns = Array.from(this.returns.values());\n    const returnsWithItems = await Promise.all(\n      allReturns.map(async (ret) => {\n        const items = Array.from(this.returnItems.values()).filter(\n          (item) => item.returnId === ret.id\n        );\n        return { ...ret, items };\n      })\n    );\n    return returnsWithItems;\n  }\n\n  async getReturn(id: string): Promise<ReturnWithItems | null> {\n    const ret = this.returns.get(id);\n    if (!ret) return null;\n\n    const items = Array.from(this.returnItems.values()).filter(\n      (item) => item.returnId === id\n    );\n\n    return { ...ret, items };\n  }\n\n  async createReturn(data: InsertReturn, items: InsertReturnItem[]): Promise<ReturnWithItems> {\n    const returnId = randomUUID();\n    const returnNumber = `RET-${Date.now()}-${Math.random().toString(36).substr(2, 9).toUpperCase()}`;\n\n    const newReturn: Return = {\n      id: returnId,\n      returnNumber,\n      ...data,\n      createdAt: new Date(),\n    };\n\n    this.returns.set(returnId, newReturn);\n\n    const createdItems: ReturnItem[] = items.map(item => {\n      const itemId = randomUUID();\n      const returnItem: ReturnItem = {\n        id: itemId,\n        returnId,\n        ...item,\n      };\n      this.returnItems.set(itemId, returnItem);\n      return returnItem;\n    });\n\n    // Update stock quantities for returned items\n    for (const item of items) {\n      const product = await this.getProduct(item.productId);\n      if (product) {\n        await this.updateProduct(item.productId, {\n          ...product,\n          stockQuantity: product.stockQuantity + item.quantity,\n        });\n      }\n\n      // Create stock movement\n      await this.createStockMovement({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        type: 'in',\n        quantity: item.quantity,\n        reason: 'return',\n        notes: `Return ${returnNumber}`,\n      });\n    }\n\n    return { ...newReturn, items: createdItems };\n  }\n\n  async updateReturn(id: string, data: Partial<InsertReturn>): Promise<Return | null> {\n    const existing = this.returns.get(id);\n    if (!existing) return null;\n\n    const updated: Return = {\n      ...existing,\n      ...data,\n    };\n    this.returns.set(id, updated);\n    return updated;\n  }\n\n  // Discount codes\n  async getDiscountCodes(customerEmail?: string): Promise<DiscountCode[]> {\n    const codes = Array.from(this.discountCodes.values());\n    if (customerEmail) {\n      return codes.filter(code => code.customerEmail === customerEmail);\n    }\n    return codes;\n  }\n\n  async getDiscountCode(code: string): Promise<DiscountCode | null> {\n    return Array.from(this.discountCodes.values()).find(dc => dc.code === code) || null;\n  }\n\n  async createDiscountCode(data: InsertDiscountCode): Promise<DiscountCode> {\n    const id = randomUUID();\n    const discountCode: DiscountCode = {\n      id,\n      ...data,\n      isUsed: false,\n      usedAt: null,\n      createdAt: new Date(),\n    };\n    this.discountCodes.set(id, discountCode);\n    return discountCode;\n  }\n\n  async useDiscountCode(code: string): Promise<DiscountCode | null> {\n    const discountCode = await this.getDiscountCode(code);\n    if (!discountCode) return null;\n\n    const updated: DiscountCode = {\n      ...discountCode,\n      isUsed: true,\n      usedAt: new Date(),\n    };\n    this.discountCodes.set(discountCode.id, updated);\n    return updated;\n  }\n\n  async deleteDiscountCode(id: string): Promise<boolean> {\n    return this.discountCodes.delete(id);\n  }\n}\n\nexport const storage = new MemStorage();","size_bytes":11263},"client/src/components/qr-code-dialog.tsx":{"content":"import { useState } from \"react\";\nimport { QRCodeSVG } from \"qrcode.react\";\nimport { Download, Loader2 } from \"lucide-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { Product } from \"@shared/schema\";\n\ninterface QRCodeDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  product: Product;\n}\n\nexport function QRCodeDialog({ open, onOpenChange, product }: QRCodeDialogProps) {\n  const [isDownloading, setIsDownloading] = useState(false);\n\n  const downloadQRCode = async () => {\n    setIsDownloading(true);\n    try {\n      // Use server-generated QR code for download\n      const response = await apiRequest(\"POST\", \"/api/qr-code/generate\", { data: product.sku });\n      const qrCodeDataURL = response.qrCode;\n\n      const downloadLink = document.createElement(\"a\");\n      downloadLink.download = `${product.sku}-qrcode.png`;\n      downloadLink.href = qrCodeDataURL;\n      downloadLink.click();\n    } catch (error) {\n      console.error(\"Failed to download QR code:\", error);\n    } finally {\n      setIsDownloading(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-md\" data-testid=\"dialog-qr-code\">\n        <DialogHeader>\n          <DialogTitle>Product QR Code</DialogTitle>\n          <DialogDescription>\n            Scan this QR code to quickly access product details\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"flex flex-col items-center space-y-6 py-6\">\n          <div className=\"bg-white p-6 rounded-lg\" id=\"qr-code-container\">\n            <QRCodeSVG\n              id=\"qr-code-svg\"\n              value={product.sku}\n              size={256}\n              level=\"H\"\n              includeMargin={false}\n            />\n          </div>\n\n          <div className=\"text-center space-y-2\">\n            <h3 className=\"font-semibold text-lg\" data-testid=\"text-qr-product-name\">\n              {product.productName}\n            </h3>\n            <p className=\"text-sm text-muted-foreground font-mono\" data-testid=\"text-qr-sku\">\n              SKU: {product.sku}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              Scan this QR code to quickly access product information\n            </p>\n          </div>\n\n          <Button \n            onClick={downloadQRCode} \n            className=\"w-full\" \n            disabled={isDownloading}\n            data-testid=\"button-download-qr\"\n          >\n            {isDownloading ? (\n              <>\n                <Loader2 className=\"h-4 w-4 mr-2 animate-spin\" />\n                Generating...\n              </>\n            ) : (\n              <>\n                <Download className=\"h-4 w-4 mr-2\" />\n                Download QR Code\n              </>\n            )}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":3030},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/create-return-dialog.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { X, Package, QrCode, Search, Clock } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { insertReturnSchema, type OrderWithItems, type Product } from \"@shared/schema\";\nimport { QRScannerDialog } from \"@/components/qr-scanner-dialog\";\nimport { z } from \"zod\";\n\ninterface ReturnItem {\n  productId: string;\n  productName: string;\n  sku: string;\n  quantity: number;\n  unitPrice: string;\n  subtotal: string;\n  exchangeProductId?: string;\n  exchangeProductName?: string;\n}\n\ninterface CreateReturnDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  order: OrderWithItems | null;\n}\n\nexport function CreateReturnDialog({ open, onOpenChange, order }: CreateReturnDialogProps) {\n  const [returnItems, setReturnItems] = useState<ReturnItem[]>([]);\n  const [exchangeProducts, setExchangeProducts] = useState<Record<string, string>>({});\n  const [isScannerOpen, setIsScannerOpen] = useState(false);\n  const [currentExchangeItemId, setCurrentExchangeItemId] = useState<string | null>(null);\n  const [manualSearchSKU, setManualSearchSKU] = useState(\"\");\n  const [showManualSearch, setShowManualSearch] = useState<string | null>(null);\n  const { toast } = useToast();\n\n  const { data: products = [] } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  const form = useForm({\n    resolver: zodResolver(insertReturnSchema),\n    defaultValues: {\n      orderId: \"\",\n      orderNumber: \"\",\n      customerName: \"\",\n      customerEmail: \"\",\n      status: \"pending\" as const,\n      reason: \"\",\n      notes: \"\",\n      refundAmount: \"0\",\n      creditAmount: \"0\",\n    },\n  });\n\n  useEffect(() => {\n    if (order && open) {\n      form.setValue(\"orderId\", order.id);\n      form.setValue(\"orderNumber\", order.orderNumber);\n      form.setValue(\"customerName\", order.customerName);\n      form.setValue(\"customerEmail\", order.customerEmail || \"\");\n      setReturnItems(order.items.map(item => ({\n        productId: item.productId,\n        productName: item.productName,\n        sku: item.sku,\n        quantity: 0,\n        unitPrice: item.unitPrice,\n        subtotal: \"0\",\n      })));\n    }\n  }, [order, open]);\n\n  const createReturnMutation = useMutation({\n    mutationFn: async (data: any) => {\n      return await apiRequest(\"POST\", \"/api/returns\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/returns\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/orders\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/discount-codes\"] });\n      const { credit } = calculateTotals();\n      toast({\n        title: \"Return Created\",\n        description: credit > 0 \n          ? `Return has been created successfully. A store credit discount code for $${credit.toFixed(2)} has been sent to the customer's email.`\n          : \"Return has been created successfully.\",\n      });\n      onOpenChange(false);\n      form.reset();\n    },\n    onError: (error: Error) => {\n      toast({\n        title: \"Error\",\n        description: error.message,\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateQuantity = (productId: string, newQuantity: number) => {\n    setReturnItems(items =>\n      items.map(item => {\n        if (item.productId === productId) {\n          const quantity = Math.max(0, Math.min(newQuantity, parseInt(item.unitPrice)));\n          const subtotal = (quantity * parseFloat(item.unitPrice)).toFixed(2);\n          return { ...item, quantity, subtotal };\n        }\n        return item;\n      })\n    );\n  };\n\n  const setExchangeProduct = (productId: string, exchangeProductId: string) => {\n    const exchangeProduct = products.find(p => p.id === exchangeProductId);\n    setReturnItems(items =>\n      items.map(item => {\n        if (item.productId === productId) {\n          return {\n            ...item,\n            exchangeProductId: exchangeProductId === \"none\" ? undefined : exchangeProductId,\n            exchangeProductName: exchangeProductId === \"none\" ? undefined : exchangeProduct?.productName,\n          };\n        }\n        return item;\n      })\n    );\n  };\n\n  const handleScanForExchange = (productId: string) => {\n    setCurrentExchangeItemId(productId);\n    setIsScannerOpen(true);\n  };\n\n  const handleProductScanned = (product: Product) => {\n    if (currentExchangeItemId) {\n      setExchangeProduct(currentExchangeItemId, product.id);\n      setIsScannerOpen(false);\n      setCurrentExchangeItemId(null);\n    }\n  };\n\n  const handleManualSearch = (productId: string) => {\n    if (!manualSearchSKU.trim()) return;\n\n    const product = products.find(p => p.sku === manualSearchSKU.trim());\n    if (product) {\n      setExchangeProduct(productId, product.id);\n      setManualSearchSKU(\"\");\n      setShowManualSearch(null);\n      toast({\n        title: \"Product Found\",\n        description: `${product.productName} selected for exchange`,\n      });\n    } else {\n      toast({\n        title: \"Product Not Found\",\n        description: `No product found with SKU: ${manualSearchSKU}`,\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const calculateTotals = () => {\n    const itemsToReturn = returnItems.filter(item => item.quantity > 0);\n\n    let totalReturnValue = 0;\n    let totalExchangeValue = 0;\n\n    itemsToReturn.forEach(item => {\n      const returnValue = parseFloat(item.subtotal);\n      totalReturnValue += returnValue;\n\n      if (item.exchangeProductId) {\n        const exchangeProduct = products.find(p => p.id === item.exchangeProductId);\n        if (exchangeProduct) {\n          totalExchangeValue += parseFloat(exchangeProduct.price) * item.quantity;\n        }\n      }\n    });\n\n    // Calculate refund or store credit for additional payment\n    const difference = totalReturnValue - totalExchangeValue;\n    const refundAmount = difference > 0 ? difference : 0;\n    // When additional payment is needed, save it as future store credit\n    const creditAmount = difference < 0 ? Math.abs(difference) : 0;\n\n    return { \n      total: totalReturnValue, \n      refund: refundAmount, \n      credit: creditAmount,\n      exchangeValue: totalExchangeValue,\n      additionalPayment: 0 // Always 0, convert to credit instead\n    };\n  };\n\n  const onSubmit = form.handleSubmit((data) => {\n    const itemsToReturn = returnItems.filter(item => item.quantity > 0);\n\n    if (itemsToReturn.length === 0) {\n      toast({\n        title: \"No Items Selected\",\n        description: \"Please select at least one item to return\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const { refund, credit, exchangeValue } = calculateTotals();\n\n    createReturnMutation.mutate({\n      ...data,\n      refundAmount: refund.toFixed(2),\n      creditAmount: credit.toFixed(2),\n      exchangeValue: exchangeValue.toFixed(2),\n      additionalPayment: \"0.00\",\n      items: itemsToReturn,\n    });\n  });\n\n  const { total, refund, credit } = calculateTotals();\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">Create Return</DialogTitle>\n          <DialogDescription>\n            Process a return or exchange for order {order?.orderNumber}\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={onSubmit} className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <h3 className=\"font-semibold text-lg\">Return Items</h3>\n            <div className=\"space-y-3\">\n              {returnItems.map((item) => (\n                <Card key={item.productId}>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start gap-4\">\n                      <div className=\"flex-1\">\n                        <p className=\"font-medium\">{item.productName}</p>\n                        <p className=\"text-sm text-muted-foreground\">{item.sku}</p>\n                        <p className=\"text-sm\">Price: ${item.unitPrice}</p>\n                      </div>\n\n                      <div className=\"flex items-center gap-3\">\n                        <div>\n                          <Label className=\"text-xs\">Return Qty</Label>\n                          <div className=\"flex items-center gap-2\">\n                            <Button\n                              type=\"button\"\n                              variant=\"outline\"\n                              size=\"icon\"\n                              className=\"h-8 w-8\"\n                              onClick={() => updateQuantity(item.productId, item.quantity - 1)}\n                            >\n                              -\n                            </Button>\n                            <span className=\"w-12 text-center\">{item.quantity}</span>\n                            <Button\n                              type=\"button\"\n                              variant=\"outline\"\n                              size=\"icon\"\n                              className=\"h-8 w-8\"\n                              onClick={() => updateQuantity(item.productId, item.quantity + 1)}\n                            >\n                              +\n                            </Button>\n                          </div>\n                        </div>\n\n                        {item.quantity > 0 && (\n                          <div className=\"space-y-2\">\n                            <Label className=\"text-xs\">Exchange For</Label>\n                            {item.exchangeProductId ? (\n                              <div className=\"flex items-center gap-2\">\n                                <div className=\"text-sm bg-muted px-3 py-2 rounded flex-1\">\n                                  {item.exchangeProductName}\n                                </div>\n                                <Button\n                                  type=\"button\"\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  onClick={() => setExchangeProduct(item.productId, \"none\")}\n                                >\n                                  <X className=\"h-4 w-4\" />\n                                </Button>\n                              </div>\n                            ) : showManualSearch === item.productId ? (\n                              <div className=\"space-y-2\">\n                                <div className=\"flex gap-2\">\n                                  <Input\n                                    placeholder=\"Enter SKU...\"\n                                    value={manualSearchSKU}\n                                    onChange={(e) => setManualSearchSKU(e.target.value)}\n                                    onKeyDown={(e) => {\n                                      if (e.key === \"Enter\") {\n                                        handleManualSearch(item.productId);\n                                      }\n                                    }}\n                                    className=\"h-8\"\n                                  />\n                                  <Button\n                                    type=\"button\"\n                                    variant=\"outline\"\n                                    size=\"sm\"\n                                    onClick={() => handleManualSearch(item.productId)}\n                                  >\n                                    <Search className=\"h-4 w-4\" />\n                                  </Button>\n                                </div>\n                                <Button\n                                  type=\"button\"\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  onClick={() => {\n                                    setShowManualSearch(null);\n                                    setManualSearchSKU(\"\");\n                                  }}\n                                  className=\"w-full\"\n                                >\n                                  Cancel\n                                </Button>\n                              </div>\n                            ) : (\n                              <div className=\"flex gap-2\">\n                                <Button\n                                  type=\"button\"\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  onClick={() => handleScanForExchange(item.productId)}\n                                  className=\"flex-1\"\n                                >\n                                  <QrCode className=\"h-4 w-4 mr-2\" />\n                                  Scan\n                                </Button>\n                                <Button\n                                  type=\"button\"\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  onClick={() => setShowManualSearch(item.productId)}\n                                  className=\"flex-1\"\n                                >\n                                  <Search className=\"h-4 w-4 mr-2\" />\n                                  Search\n                                </Button>\n                              </div>\n                            )}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <h3 className=\"font-semibold text-lg\">Return Details</h3>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"reason\">Return Reason *</Label>\n              <Select\n                value={form.watch(\"reason\")}\n                onValueChange={(value) => form.setValue(\"reason\", value)}\n              >\n                <SelectTrigger id=\"reason\">\n                  <SelectValue placeholder=\"Select reason\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"defective\">Defective/Damaged</SelectItem>\n                  <SelectItem value=\"wrong_item\">Wrong Item</SelectItem>\n                  <SelectItem value=\"wrong_size\">Wrong Size</SelectItem>\n                  <SelectItem value=\"not_as_described\">Not as Described</SelectItem>\n                  <SelectItem value=\"customer_changed_mind\">Changed Mind</SelectItem>\n                  <SelectItem value=\"other\">Other</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"notes\">Additional Notes</Label>\n              <Textarea\n                id=\"notes\"\n                {...form.register(\"notes\")}\n                placeholder=\"Add any additional details...\"\n                rows={3}\n              />\n            </div>\n          </div>\n\n          {returnItems.some(item => item.quantity > 0) && (\n            <Card>\n              <CardContent className=\"p-4\">\n                <h3 className=\"font-semibold mb-3\">Return Summary</h3>\n                {(() => {\n                  const { total: totalReturnValue, exchangeValue: totalExchangeValue, refund, additionalPayment } = calculateTotals();\n\n                  return (\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-muted-foreground\">Return Value:</span>\n                        <span className=\"font-medium\">${totalReturnValue.toFixed(2)}</span>\n                      </div>\n                      {totalExchangeValue > 0 && (\n                        <>\n                          <div className=\"flex justify-between\">\n                            <span className=\"text-muted-foreground\">Exchange Value:</span>\n                            <span className=\"font-medium\">${totalExchangeValue.toFixed(2)}</span>\n                          </div>\n                          <div className=\"flex justify-between pt-2 border-t\">\n                            {refund > 0 ? (\n                              <>\n                                <span className=\"font-semibold\">Refund Amount:</span>\n                                <span className=\"font-semibold text-green-600\">${refund.toFixed(2)}</span>\n                              </>\n                            ) : credit > 0 ? (\n                              <>\n                                <span className=\"font-semibold\">Store Credit (Future Discount):</span>\n                                <span className=\"font-semibold text-blue-600\">${credit.toFixed(2)}</span>\n                              </>\n                            ) : (\n                              <>\n                                <span className=\"font-semibold\">Even Exchange:</span>\n                                <span className=\"font-semibold\">$0.00</span>\n                              </>\n                            )}\n                          </div>\n                        </>\n                      )}\n                      {totalExchangeValue === 0 && (\n                        <div className=\"flex justify-between pt-2 border-t\">\n                          <span className=\"font-semibold\">Refund Amount:</span>\n                          <span className=\"font-semibold text-green-600\">${totalReturnValue.toFixed(2)}</span>\n                        </div>\n                      )}\n                    </div>\n                  );\n                })()}\n              </CardContent>\n            </Card>\n          )}\n\n          <div className=\"border-t pt-4\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-4\">\n              <Clock className=\"h-4 w-4\" />\n              <span>Return Date: {format(new Date(), \"MMM dd, yyyy HH:mm:ss\")}</span>\n            </div>\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => {\n                  onOpenChange(false);\n                  form.reset();\n                }}\n                disabled={createReturnMutation.isPending}\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={createReturnMutation.isPending || total === 0}\n              >\n                {createReturnMutation.isPending ? \"Creating...\" : \"Create Return\"}\n              </Button>\n            </div>\n          </div>\n        </form>\n      </DialogContent>\n\n      <QRScannerDialog\n        open={isScannerOpen}\n        onOpenChange={setIsScannerOpen}\n        onProductScanned={handleProductScanned}\n      />\n    </Dialog>\n  );\n}","size_bytes":19453},"client/src/components/use-credit-dialog.tsx":{"content":"\nimport { useState, useEffect } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { X, Plus, Search, Package, Clock } from \"lucide-react\";\nimport { format } from \"date-fns\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { insertOrderSchema, type Product, type InsertOrder, type DiscountCode } from \"@shared/schema\";\n\ninterface OrderItem {\n  productId: string;\n  productName: string;\n  sku: string;\n  unitPrice: string;\n  quantity: number;\n  subtotal: string;\n}\n\ninterface UseCreditDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  credit: DiscountCode | null;\n}\n\nexport function UseCreditDialog({ open, onOpenChange, credit }: UseCreditDialogProps) {\n  const [orderItems, setOrderItems] = useState<OrderItem[]>([]);\n  const [searchOpen, setSearchOpen] = useState(false);\n  const [additionalPayment, setAdditionalPayment] = useState(\"0\");\n  const { toast } = useToast();\n\n  const { data: products = [] } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  const form = useForm<InsertOrder>({\n    resolver: zodResolver(insertOrderSchema),\n    defaultValues: {\n      customerName: \"\",\n      customerEmail: \"\",\n      customerPhone: \"\",\n      status: \"pending\",\n      notes: \"\",\n      totalAmount: \"0\",\n    },\n  });\n\n  // Pre-fill customer details when credit is selected\n  useEffect(() => {\n    if (credit && open) {\n      form.setValue(\"customerEmail\", credit.customerEmail);\n      form.setValue(\"notes\", `Store credit code: ${credit.code}`);\n    }\n  }, [credit, open]);\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertOrder & { items: OrderItem[]; creditCode: string }) => {\n      return await apiRequest(\"POST\", \"/api/orders\", data);\n    },\n    onSuccess: async () => {\n      // Mark credit as used\n      if (credit) {\n        await apiRequest(\"POST\", `/api/discount-codes/${credit.code}/use`, {});\n      }\n      queryClient.invalidateQueries({ queryKey: [\"/api/orders\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/discount-codes\"] });\n      toast({\n        title: \"Success\",\n        description: \"Order created successfully and store credit has been applied\",\n      });\n      onOpenChange(false);\n      form.reset();\n      setOrderItems([]);\n      setAdditionalPayment(\"0\");\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to create order. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const addProduct = (product: Product) => {\n    const existingItem = orderItems.find((item) => item.productId === product.id);\n    if (existingItem) {\n      updateQuantity(product.id, existingItem.quantity + 1);\n      toast({\n        title: \"Product Updated\",\n        description: `${product.productName} quantity increased to ${existingItem.quantity + 1}`,\n      });\n    } else {\n      const newItem: OrderItem = {\n        productId: product.id,\n        productName: product.productName,\n        sku: product.sku,\n        unitPrice: product.price,\n        quantity: 1,\n        subtotal: product.price,\n      };\n      setOrderItems([...orderItems, newItem]);\n      toast({\n        title: \"Product Added\",\n        description: `${product.productName} added to order`,\n      });\n    }\n    setSearchOpen(false);\n  };\n\n  const updateQuantity = (productId: string, quantity: number) => {\n    if (quantity < 1) return;\n    setOrderItems(\n      orderItems.map((item) =>\n        item.productId === productId\n          ? {\n              ...item,\n              quantity,\n              subtotal: (parseFloat(item.unitPrice) * quantity).toFixed(2),\n            }\n          : item\n      )\n    );\n  };\n\n  const removeItem = (productId: string) => {\n    setOrderItems(orderItems.filter((item) => item.productId !== productId));\n  };\n\n  const calculateTotal = () => {\n    return orderItems.reduce((sum, item) => sum + parseFloat(item.subtotal), 0).toFixed(2);\n  };\n\n  const calculatePaymentBreakdown = () => {\n    const orderTotal = parseFloat(calculateTotal());\n    const creditAmount = credit ? parseFloat(credit.amount) : 0;\n    const remaining = Math.max(0, orderTotal - creditAmount);\n    const creditUsed = Math.min(orderTotal, creditAmount);\n    \n    return {\n      orderTotal,\n      creditAmount,\n      creditUsed,\n      additionalRequired: remaining,\n    };\n  };\n\n  const onSubmit = (data: InsertOrder) => {\n    if (orderItems.length === 0) {\n      toast({\n        title: \"Error\",\n        description: \"Please add at least one product to the order\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (!credit) {\n      toast({\n        title: \"Error\",\n        description: \"No store credit selected\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const breakdown = calculatePaymentBreakdown();\n    const additionalPaid = parseFloat(additionalPayment);\n\n    if (additionalPaid < breakdown.additionalRequired) {\n      toast({\n        title: \"Insufficient Payment\",\n        description: `Please pay the remaining amount of $${breakdown.additionalRequired.toFixed(2)}`,\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const total = calculateTotal();\n    createMutation.mutate({\n      ...data,\n      totalAmount: total,\n      items: orderItems,\n      creditCode: credit.code,\n    });\n  };\n\n  const breakdown = calculatePaymentBreakdown();\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">Use Store Credit</DialogTitle>\n          <DialogDescription>\n            Create a new order using store credit {credit?.code}\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n          {/* Credit Info */}\n          {credit && (\n            <Card className=\"bg-green-50 border-green-200\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex justify-between items-center\">\n                  <div>\n                    <p className=\"text-sm text-muted-foreground\">Available Store Credit</p>\n                    <p className=\"text-2xl font-bold text-green-600\">\n                      ${parseFloat(credit.amount).toFixed(2)}\n                    </p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-sm text-muted-foreground\">Code</p>\n                    <code className=\"text-sm font-mono\">{credit.code}</code>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          <div className=\"space-y-4\">\n            <h3 className=\"font-semibold text-lg\">Customer Information</h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"customerName\">Customer Name *</Label>\n                <Input\n                  id=\"customerName\"\n                  {...form.register(\"customerName\")}\n                  placeholder=\"John Doe\"\n                />\n                {form.formState.errors.customerName && (\n                  <p className=\"text-sm text-destructive\">{form.formState.errors.customerName.message}</p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"customerEmail\">Email (Pre-filled)</Label>\n                <Input\n                  id=\"customerEmail\"\n                  {...form.register(\"customerEmail\")}\n                  type=\"email\"\n                  readOnly\n                  className=\"bg-muted\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"customerPhone\">Phone</Label>\n                <Input\n                  id=\"customerPhone\"\n                  {...form.register(\"customerPhone\")}\n                  placeholder=\"+1 234 567 8900\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"status\">Status</Label>\n                <Select\n                  value={form.watch(\"status\")}\n                  onValueChange={(value) => form.setValue(\"status\", value as any)}\n                >\n                  <SelectTrigger id=\"status\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"pending\">Pending</SelectItem>\n                    <SelectItem value=\"processing\">Processing</SelectItem>\n                    <SelectItem value=\"shipped\">Shipped</SelectItem>\n                    <SelectItem value=\"delivered\">Delivered</SelectItem>\n                    <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"font-semibold text-lg\">Products</h3>\n              <Popover open={searchOpen} onOpenChange={setSearchOpen}>\n                <PopoverTrigger asChild>\n                  <Button type=\"button\" variant=\"outline\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Add Product\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-[400px] p-0\" align=\"end\">\n                  <Command>\n                    <CommandInput placeholder=\"Search products...\" />\n                    <CommandList>\n                      <CommandEmpty>No products found.</CommandEmpty>\n                      <CommandGroup>\n                        {products.map((product) => (\n                          <CommandItem\n                            key={product.id}\n                            onSelect={() => addProduct(product)}\n                          >\n                            <div className=\"flex items-center gap-3 w-full\">\n                              <div className=\"w-10 h-10 rounded bg-muted flex items-center justify-center overflow-hidden flex-shrink-0\">\n                                {product.productImage ? (\n                                  <img\n                                    src={product.productImage}\n                                    alt={product.productName}\n                                    className=\"w-full h-full object-cover\"\n                                  />\n                                ) : (\n                                  <Package className=\"h-5 w-5 text-muted-foreground\" />\n                                )}\n                              </div>\n                              <div className=\"flex-1 min-w-0\">\n                                <p className=\"font-medium truncate\">{product.productName}</p>\n                                <p className=\"text-xs text-muted-foreground\">{product.sku}</p>\n                              </div>\n                              <p className=\"font-semibold\">${product.price}</p>\n                            </div>\n                          </CommandItem>\n                        ))}\n                      </CommandGroup>\n                    </CommandList>\n                  </Command>\n                </PopoverContent>\n              </Popover>\n            </div>\n\n            {orderItems.length === 0 ? (\n              <Card className=\"border-dashed\">\n                <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                  <div className=\"rounded-full bg-muted p-6 mb-4\">\n                    <Package className=\"h-10 w-10 text-muted-foreground\" />\n                  </div>\n                  <p className=\"text-sm text-muted-foreground\">\n                    No products added yet\n                  </p>\n                </CardContent>\n              </Card>\n            ) : (\n              <Card>\n                <CardContent className=\"p-0\">\n                  <div className=\"divide-y\">\n                    {orderItems.map((item) => (\n                      <div key={item.productId} className=\"p-4\">\n                        <div className=\"flex items-center gap-4\">\n                          <div className=\"flex-1 min-w-0\">\n                            <p className=\"font-medium\">{item.productName}</p>\n                            <p className=\"text-sm text-muted-foreground font-mono\">{item.sku}</p>\n                          </div>\n                          <div className=\"flex items-center gap-3\">\n                            <div className=\"flex items-center gap-2\">\n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"icon\"\n                                className=\"h-8 w-8\"\n                                onClick={() => updateQuantity(item.productId, item.quantity - 1)}\n                              >\n                                -\n                              </Button>\n                              <span className=\"w-12 text-center font-medium\">\n                                {item.quantity}\n                              </span>\n                              <Button\n                                type=\"button\"\n                                variant=\"outline\"\n                                size=\"icon\"\n                                className=\"h-8 w-8\"\n                                onClick={() => updateQuantity(item.productId, item.quantity + 1)}\n                              >\n                                +\n                              </Button>\n                            </div>\n                            <p className=\"font-semibold w-20 text-right\">\n                              ${item.subtotal}\n                            </p>\n                            <Button\n                              type=\"button\"\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              onClick={() => removeItem(item.productId)}\n                            >\n                              <X className=\"h-4 w-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"p-4 bg-muted/50 border-t space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span>Order Total:</span>\n                      <span className=\"font-semibold\">${breakdown.orderTotal.toFixed(2)}</span>\n                    </div>\n                    <div className=\"flex justify-between text-sm text-green-600\">\n                      <span>Store Credit Applied:</span>\n                      <span className=\"font-semibold\">-${breakdown.creditUsed.toFixed(2)}</span>\n                    </div>\n                    <div className=\"border-t pt-2 flex justify-between\">\n                      <span className=\"font-semibold\">Additional Payment Required:</span>\n                      <span className=\"font-bold text-lg text-red-600\">\n                        ${breakdown.additionalRequired.toFixed(2)}\n                      </span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n          </div>\n\n          {breakdown.additionalRequired > 0 && (\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"additionalPayment\">Additional Payment Amount *</Label>\n              <Input\n                id=\"additionalPayment\"\n                type=\"number\"\n                step=\"0.01\"\n                min=\"0\"\n                value={additionalPayment}\n                onChange={(e) => setAdditionalPayment(e.target.value)}\n                placeholder=\"0.00\"\n              />\n              <p className=\"text-sm text-muted-foreground\">\n                Enter the additional payment amount to complete this order\n              </p>\n            </div>\n          )}\n\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"notes\">Order Notes</Label>\n            <Textarea\n              id=\"notes\"\n              {...form.register(\"notes\")}\n              placeholder=\"Add any special instructions or notes...\"\n              rows={3}\n            />\n          </div>\n\n          <div className=\"border-t pt-4\">\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground mb-4\">\n              <Clock className=\"h-4 w-4\" />\n              <span>Order Date: {format(new Date(), \"MMM dd, yyyy HH:mm:ss\")}</span>\n            </div>\n            <div className=\"flex justify-end gap-3\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => {\n                  onOpenChange(false);\n                  form.reset();\n                  setOrderItems([]);\n                  setAdditionalPayment(\"0\");\n                }}\n                disabled={createMutation.isPending}\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={createMutation.isPending || orderItems.length === 0}\n              >\n                {createMutation.isPending ? \"Creating...\" : \"Create Order & Use Credit\"}\n              </Button>\n            </div>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":18289},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/pages/orders.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Plus, Search, Package, QrCode } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { CreateOrderDialog } from \"@/components/create-order-dialog\";\nimport { OrderCard } from \"@/components/order-card\";\nimport { QRScannerDialog } from \"@/components/qr-scanner-dialog\";\nimport type { OrderWithItems } from \"@shared/schema\";\n\nexport default function Orders() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [isScannerOpen, setIsScannerOpen] = useState(false);\n  const [selectedStatus, setSelectedStatus] = useState<string>(\"all\");\n\n  const { data: orders = [], isLoading } = useQuery<OrderWithItems[]>({\n    queryKey: [\"/api/orders\"],\n  });\n\n  const filteredOrders = orders.filter((order) => {\n    const matchesSearch =\n      order.orderNumber.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      order.customerName.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesStatus =\n      selectedStatus === \"all\" || order.status === selectedStatus;\n    return matchesSearch && matchesStatus;\n  });\n\n  const statuses = [\n    { value: \"all\", label: \"All Orders\" },\n    { value: \"pending\", label: \"Pending\" },\n    { value: \"processing\", label: \"Processing\" },\n    { value: \"shipped\", label: \"Shipped\" },\n    { value: \"delivered\", label: \"Delivered\" },\n    { value: \"cancelled\", label: \"Cancelled\" },\n  ];\n\n  const handleScan = (result: string) => {\n    // Logic to handle scanned QR code (e.g., find product by code)\n    console.log(\"Scanned:\", result);\n    setIsScannerOpen(false);\n  };\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"border-b bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex flex-col gap-6\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n              <div>\n                <h1 className=\"text-3xl font-bold tracking-tight\" data-testid=\"text-page-title\">\n                  Orders\n                </h1>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  Manage and track your orders\n                </p>\n              </div>\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => setIsScannerOpen(true)}\n                  variant=\"outline\"\n                  data-testid=\"button-scan-product\"\n                >\n                  <QrCode className=\"h-4 w-4 mr-2\" />\n                  Scan Product\n                </Button>\n                <Button\n                  onClick={() => setIsCreateDialogOpen(true)}\n                  data-testid=\"button-create-order\"\n                >\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Create Order\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search orders by number or customer name...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-10\"\n                data-testid=\"input-search-orders\"\n              />\n            </div>\n\n            <div className=\"flex gap-2 flex-wrap\">\n              {statuses.map((status) => (\n                <Badge\n                  key={status.value}\n                  variant={selectedStatus === status.value ? \"default\" : \"outline\"}\n                  className=\"cursor-pointer hover-elevate active-elevate-2\"\n                  onClick={() => setSelectedStatus(status.value)}\n                  data-testid={`badge-status-${status.value}`}\n                >\n                  {status.label}\n                </Badge>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 overflow-auto bg-muted/30\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"mb-4 flex items-center justify-between\">\n            <p className=\"text-sm text-muted-foreground\" data-testid=\"text-order-count\">\n              {filteredOrders.length} {filteredOrders.length === 1 ? \"order\" : \"orders\"}\n            </p>\n          </div>\n\n          {isLoading ? (\n            <div className=\"flex flex-col gap-4\">\n              {[...Array(4)].map((_, i) => (\n                <Card key={i}>\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex items-center gap-4\">\n                      <Skeleton className=\"h-12 w-12 rounded-md\" />\n                      <div className=\"flex-1\">\n                        <Skeleton className=\"h-5 w-32 mb-2\" />\n                        <Skeleton className=\"h-4 w-48\" />\n                      </div>\n                      <Skeleton className=\"h-9 w-24\" />\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : filteredOrders.length === 0 ? (\n            <Card className=\"border-dashed\">\n              <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n                <div className=\"rounded-full bg-muted p-6 mb-4\">\n                  <Package className=\"h-10 w-10 text-muted-foreground\" />\n                </div>\n                <h3 className=\"text-lg font-semibold mb-2\" data-testid=\"text-empty-state\">\n                  No orders found\n                </h3>\n                <p className=\"text-sm text-muted-foreground mb-6 max-w-sm\">\n                  {searchQuery || selectedStatus !== \"all\"\n                    ? \"Try adjusting your search or filter criteria\"\n                    : \"Get started by creating your first order\"}\n                </p>\n                {!searchQuery && selectedStatus === \"all\" && (\n                  <Button onClick={() => setIsCreateDialogOpen(true)} data-testid=\"button-create-first-order\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Create Your First Order\n                  </Button>\n                )}\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"flex flex-col gap-4\">\n              {filteredOrders.map((order) => (\n                <OrderCard key={order.id} order={order} />\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <CreateOrderDialog\n        open={isCreateDialogOpen}\n        onOpenChange={setIsCreateDialogOpen}\n      />\n      <QRScannerDialog\n        open={isScannerOpen}\n        onOpenChange={setIsScannerOpen}\n        onProductScanned={(product) => {\n          console.log(\"Scanned product:\", product);\n          setIsScannerOpen(false);\n        }}\n      />\n    </div>\n  );\n}","size_bytes":7143},"postcss.config.js":{"content":"\nexport default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n  from: undefined,\n}\n","size_bytes":100},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/pages/inventory.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Plus, Search, QrCode, Grid3x3, List, Filter } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { ProductDialog } from \"@/components/product-dialog\";\nimport { QRScannerDialog } from \"@/components/qr-scanner-dialog\";\nimport { ProductCard } from \"@/components/product-card\";\nimport type { Product } from \"@shared/schema\";\n\nexport default function Inventory() {\n  const [viewMode, setViewMode] = useState<\"grid\" | \"list\">(\"grid\");\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState<string>(\"all\");\n  const [isCreateDialogOpen, setIsCreateDialogOpen] = useState(false);\n  const [isScannerOpen, setIsScannerOpen] = useState(false);\n\n  const { data: products = [], isLoading } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  const { data: lowStockProducts = [] } = useQuery<Product[]>({\n    queryKey: [\"/api/stock-movements/low-stock\"],\n  });\n\n  const filteredProducts = products.filter((product) => {\n    const matchesSearch =\n      product.productName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      product.sku.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      product.brand.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesCategory =\n      selectedCategory === \"all\" || product.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  const categories = [\"all\", ...new Set(products.map((p) => p.category))];\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"border-b bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex flex-col gap-6\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n              <div>\n                <h1 className=\"text-3xl font-bold tracking-tight\" data-testid=\"text-page-title\">\n                  Inventory\n                </h1>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  Manage your product catalog and stock\n                </p>\n              </div>\n              <div className=\"flex gap-2 flex-wrap\">\n                <Button\n                  onClick={() => setIsScannerOpen(true)}\n                  variant=\"outline\"\n                  data-testid=\"button-scan-qr\"\n                >\n                  <QrCode className=\"h-4 w-4 mr-2\" />\n                  Scan QR\n                </Button>\n                <Button\n                  onClick={() => setIsCreateDialogOpen(true)}\n                  data-testid=\"button-create-product\"\n                >\n                  <Plus className=\"h-4 w-4 mr-2\" />\n                  Create Product\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col sm:flex-row gap-4\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search products by name, SKU, or brand...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10\"\n                  data-testid=\"input-search-products\"\n                />\n              </div>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant={viewMode === \"grid\" ? \"secondary\" : \"outline\"}\n                  size=\"icon\"\n                  onClick={() => setViewMode(\"grid\")}\n                  data-testid=\"button-view-grid\"\n                >\n                  <Grid3x3 className=\"h-4 w-4\" />\n                </Button>\n                <Button\n                  variant={viewMode === \"list\" ? \"secondary\" : \"outline\"}\n                  size=\"icon\"\n                  onClick={() => setViewMode(\"list\")}\n                  data-testid=\"button-view-list\"\n                >\n                  <List className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n\n            <div className=\"flex gap-2 flex-wrap\">\n              {categories.map((category) => (\n                <Badge\n                  key={category}\n                  variant={selectedCategory === category ? \"default\" : \"outline\"}\n                  className=\"cursor-pointer hover-elevate active-elevate-2\"\n                  onClick={() => setSelectedCategory(category)}\n                  data-testid={`badge-category-${category}`}\n                >\n                  {category === \"all\" ? \"All Products\" : category}\n                </Badge>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 overflow-auto bg-muted/30\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          {lowStockProducts.length > 0 && (\n            <Card className=\"mb-6 border-yellow-500 bg-yellow-50 dark:bg-yellow-950/20\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-start gap-3\">\n                  <div className=\"rounded-full bg-yellow-500/20 p-2\">\n                    <Filter className=\"h-5 w-5 text-yellow-700 dark:text-yellow-500\" />\n                  </div>\n                  <div className=\"flex-1\">\n                    <h3 className=\"font-semibold text-yellow-900 dark:text-yellow-100\">\n                      Low Stock Alert\n                    </h3>\n                    <p className=\"text-sm text-yellow-800 dark:text-yellow-200 mt-1\">\n                      {lowStockProducts.length} {lowStockProducts.length === 1 ? \"product\" : \"products\"} running low on stock (less than 10 units)\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          <div className=\"mb-4 flex items-center justify-between\">\n            <p className=\"text-sm text-muted-foreground\" data-testid=\"text-product-count\">\n              {filteredProducts.length} {filteredProducts.length === 1 ? \"product\" : \"products\"}\n            </p>\n          </div>\n\n          {isLoading ? (\n            <div\n              className={\n                viewMode === \"grid\"\n                  ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"\n                  : \"flex flex-col gap-4\"\n              }\n            >\n              {[...Array(6)].map((_, i) => (\n                <Card key={i}>\n                  <CardContent className=\"p-6\">\n                    <Skeleton className=\"w-full aspect-square mb-4\" />\n                    <Skeleton className=\"h-6 w-3/4 mb-2\" />\n                    <Skeleton className=\"h-4 w-1/2\" />\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : filteredProducts.length === 0 ? (\n            <Card className=\"border-dashed\">\n              <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n                <div className=\"rounded-full bg-muted p-6 mb-4\">\n                  <Filter className=\"h-10 w-10 text-muted-foreground\" />\n                </div>\n                <h3 className=\"text-lg font-semibold mb-2\" data-testid=\"text-empty-state\">\n                  No products found\n                </h3>\n                <p className=\"text-sm text-muted-foreground mb-6 max-w-sm\">\n                  {searchQuery || selectedCategory !== \"all\"\n                    ? \"Try adjusting your search or filter criteria\"\n                    : \"Get started by creating your first product\"}\n                </p>\n                {!searchQuery && selectedCategory === \"all\" && (\n                  <Button onClick={() => setIsCreateDialogOpen(true)} data-testid=\"button-create-first-product\">\n                    <Plus className=\"h-4 w-4 mr-2\" />\n                    Create Your First Product\n                  </Button>\n                )}\n              </CardContent>\n            </Card>\n          ) : (\n            <div\n              className={\n                viewMode === \"grid\"\n                  ? \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"\n                  : \"flex flex-col gap-4\"\n              }\n            >\n              {filteredProducts.map((product) => (\n                <ProductCard key={product.id} product={product} viewMode={viewMode} />\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      <ProductDialog\n        open={isCreateDialogOpen}\n        onOpenChange={setIsCreateDialogOpen}\n      />\n      <QRScannerDialog open={isScannerOpen} onOpenChange={setIsScannerOpen} />\n    </div>\n  );\n}\n","size_bytes":8877},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport multer from \"multer\";\nimport { storage } from \"./storage\";\nimport { qrCodeService } from \"./qr-service\";\nimport {\n  insertProductSchema,\n  insertOrderSchema,\n  insertOrderItemSchema,\n  insertStockMovementSchema,\n  insertReturnSchema,\n  insertReturnItemSchema,\n} from \"@shared/schema\";\nimport { z } from \"zod\";\nimport { fromZodError } from \"zod-validation-error\";\n\n// Configure multer for file uploads (in-memory storage)\nconst upload = multer({\n  storage: multer.memoryStorage(),\n  limits: {\n    fileSize: 5 * 1024 * 1024, // 5MB limit\n  },\n  fileFilter: (_req, file, cb) => {\n    // Accept only image files\n    if (file.mimetype.startsWith(\"image/\")) {\n      cb(null, true);\n    } else {\n      cb(new Error(\"Only image files are allowed\"));\n    }\n  },\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // QR Code generation endpoint\n  app.post(\"/api/qr-code/generate\", async (req, res) => {\n    try {\n      const { data } = req.body;\n      if (!data || typeof data !== \"string\") {\n        return res.status(400).json({ error: \"Data parameter is required\" });\n      }\n\n      const qrCodeDataURL = await qrCodeService.generateQRCode(data);\n      res.json({ qrCode: qrCodeDataURL });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to generate QR code\" });\n    }\n  });\n\n  // Get QR code as image\n  app.get(\"/api/qr-code/:data\", async (req, res) => {\n    try {\n      const data = decodeURIComponent(req.params.data);\n      const buffer = await qrCodeService.generateQRCodeBuffer(data);\n      res.setHeader(\"Content-Type\", \"image/png\");\n      res.send(buffer);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to generate QR code\" });\n    }\n  });\n\n  // Image upload endpoint\n  app.post(\"/api/upload/image\", upload.single(\"image\"), async (req, res) => {\n    try {\n      if (!req.file) {\n        return res.status(400).json({ error: \"No image file provided\" });\n      }\n\n      // Convert buffer to base64 data URL\n      const base64 = req.file.buffer.toString(\"base64\");\n      const dataURL = `data:${req.file.mimetype};base64,${base64}`;\n\n      res.json({ url: dataURL });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to upload image\" });\n    }\n  });\n\n  // Multiple image upload endpoint\n  app.post(\"/api/upload/images\", upload.array(\"images\", 5), async (req, res) => {\n    try {\n      if (!req.files || !Array.isArray(req.files) || req.files.length === 0) {\n        return res.status(400).json({ error: \"No image files provided\" });\n      }\n\n      const urls = req.files.map((file) => {\n        const base64 = file.buffer.toString(\"base64\");\n        return `data:${file.mimetype};base64,${base64}`;\n      });\n\n      res.json({ urls });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to upload images\" });\n    }\n  });\n  // Product routes\n  app.get(\"/api/products\", async (_req, res) => {\n    try {\n      const products = await storage.getProducts();\n      res.json(products);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch products\" });\n    }\n  });\n\n  app.get(\"/api/products/:id\", async (req, res) => {\n    try {\n      const product = await storage.getProduct(req.params.id);\n      if (!product) {\n        return res.status(404).json({ error: \"Product not found\" });\n      }\n      res.json(product);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch product\" });\n    }\n  });\n\n  app.post(\"/api/products\", async (req, res) => {\n    try {\n      const parsed = insertProductSchema.safeParse(req.body);\n      if (!parsed.success) {\n        const error = fromZodError(parsed.error);\n        return res.status(400).json({ error: error.message });\n      }\n\n      // Check if SKU already exists\n      const existing = await storage.getProductBySKU(parsed.data.sku);\n      if (existing) {\n        return res.status(400).json({ error: \"Product with this SKU already exists\" });\n      }\n\n      const product = await storage.createProduct(parsed.data);\n      res.status(201).json(product);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to create product\" });\n    }\n  });\n\n  app.patch(\"/api/products/:id\", async (req, res) => {\n    try {\n      const parsed = insertProductSchema.safeParse(req.body);\n      if (!parsed.success) {\n        const error = fromZodError(parsed.error);\n        return res.status(400).json({ error: error.message });\n      }\n\n      // Check if SKU already exists for another product\n      const existing = await storage.getProductBySKU(parsed.data.sku);\n      if (existing && existing.id !== req.params.id) {\n        return res.status(400).json({ error: \"Product with this SKU already exists\" });\n      }\n\n      const product = await storage.updateProduct(req.params.id, parsed.data);\n      if (!product) {\n        return res.status(404).json({ error: \"Product not found\" });\n      }\n      res.json(product);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update product\" });\n    }\n  });\n\n  app.delete(\"/api/products/:id\", async (req, res) => {\n    try {\n      const success = await storage.deleteProduct(req.params.id);\n      if (!success) {\n        return res.status(404).json({ error: \"Product not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to delete product\" });\n    }\n  });\n\n  // Order routes\n  app.get(\"/api/orders\", async (_req, res) => {\n    try {\n      const orders = await storage.getOrders();\n      res.json(orders);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch orders\" });\n    }\n  });\n\n  app.get(\"/api/orders/:id\", async (req, res) => {\n    try {\n      const order = await storage.getOrder(req.params.id);\n      if (!order) {\n        return res.status(404).json({ error: \"Order not found\" });\n      }\n      res.json(order);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch order\" });\n    }\n  });\n\n  app.post(\"/api/orders\", async (req, res) => {\n    try {\n      const { items, ...orderData } = req.body;\n\n      const parsedOrder = insertOrderSchema.safeParse(orderData);\n      if (!parsedOrder.success) {\n        const error = fromZodError(parsedOrder.error);\n        return res.status(400).json({ error: error.message });\n      }\n\n      // Validate items\n      if (!items || !Array.isArray(items) || items.length === 0) {\n        return res.status(400).json({ error: \"Order must have at least one item\" });\n      }\n\n      const orderItemsSchema = z.array(insertOrderItemSchema);\n      const parsedItems = orderItemsSchema.safeParse(items);\n      if (!parsedItems.success) {\n        const error = fromZodError(parsedItems.error);\n        return res.status(400).json({ error: error.message });\n      }\n\n      const order = await storage.createOrder(parsedOrder.data, parsedItems.data);\n      res.status(201).json(order);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to create order\" });\n    }\n  });\n\n  app.patch(\"/api/orders/:id\", async (req, res) => {\n    try {\n      const parsed = insertOrderSchema.safeParse(req.body);\n      if (!parsed.success) {\n        const error = fromZodError(parsed.error);\n        return res.status(400).json({ error: error.message });\n      }\n\n      const order = await storage.updateOrder(req.params.id, parsed.data);\n      if (!order) {\n        return res.status(404).json({ error: \"Order not found\" });\n      }\n      res.json(order);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update order\" });\n    }\n  });\n\n  app.delete(\"/api/orders/:id\", async (req, res) => {\n    try {\n      const success = await storage.deleteOrder(req.params.id);\n      if (!success) {\n        return res.status(404).json({ error: \"Order not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to delete order\" });\n    }\n  });\n\n  // Stock Movement routes\n  app.get(\"/api/stock-movements\", async (req, res) => {\n    try {\n      const productId = req.query.productId as string | undefined;\n      const movements = await storage.getStockMovements(productId);\n      res.json(movements);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch stock movements\" });\n    }\n  });\n\n  app.post(\"/api/stock-movements\", async (req, res) => {\n    try {\n      const parsed = insertStockMovementSchema.safeParse(req.body);\n      if (!parsed.success) {\n        const error = fromZodError(parsed.error);\n        return res.status(400).json({ error: error.message });\n      }\n\n      const movement = await storage.createStockMovement(parsed.data);\n      res.status(201).json(movement);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to create stock movement\" });\n    }\n  });\n\n  app.get(\"/api/stock-movements/low-stock\", async (req, res) => {\n    try {\n      const threshold = req.query.threshold ? parseInt(req.query.threshold as string) : 10;\n      const products = await storage.getLowStockProducts(threshold);\n      res.json(products);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch low stock products\" });\n    }\n  });\n\n  // Return routes\n  app.get(\"/api/returns\", async (_req, res) => {\n    try {\n      const returns = await storage.getReturns();\n      res.json(returns);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch returns\" });\n    }\n  });\n\n  app.get(\"/api/returns/:id\", async (req, res) => {\n    try {\n      const ret = await storage.getReturn(req.params.id);\n      if (!ret) {\n        return res.status(404).json({ error: \"Return not found\" });\n      }\n      res.json(ret);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch return\" });\n    }\n  });\n\n  app.post(\"/api/returns\", async (req, res) => {\n    try {\n      const { items, ...returnData } = req.body;\n\n      const parsedReturn = insertReturnSchema.safeParse(returnData);\n      if (!parsedReturn.success) {\n        const error = fromZodError(parsedReturn.error);\n        return res.status(400).json({ error: error.message });\n      }\n\n      if (!items || !Array.isArray(items) || items.length === 0) {\n        return res.status(400).json({ error: \"Return must have at least one item\" });\n      }\n\n      const returnItemsSchema = z.array(insertReturnItemSchema);\n      const parsedItems = returnItemsSchema.safeParse(items);\n      if (!parsedItems.success) {\n        const error = fromZodError(parsedItems.error);\n        return res.status(400).json({ error: error.message });\n      }\n\n      const ret = await storage.createReturn(parsedReturn.data, parsedItems.data);\n      \n      // Generate discount code if there's credit (including when exchange value > return value)\n      if (ret.creditAmount && parseFloat(ret.creditAmount) > 0 && ret.customerEmail) {\n        try {\n          const code = `CREDIT-${Date.now()}-${Math.random().toString(36).substr(2, 6).toUpperCase()}`;\n          const expiresAt = new Date();\n          expiresAt.setMonth(expiresAt.getMonth() + 6); // 6 months expiry\n          \n          const discountCode = await storage.createDiscountCode({\n            code,\n            customerEmail: ret.customerEmail,\n            amount: ret.creditAmount,\n            expiresAt,\n          });\n          \n          // Send email with discount code\n          try {\n            const { emailService } = await import('./email-service');\n            await emailService.sendDiscountCode(\n              ret.customerEmail,\n              code,\n              ret.creditAmount,\n              expiresAt\n            );\n          } catch (emailError) {\n            console.error('Failed to send discount code email:', emailError);\n          }\n        } catch (discountError) {\n          console.error('Failed to create discount code:', discountError);\n        }\n      }\n      \n      res.status(201).json(ret);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to create return\" });\n    }\n  });\n\n  app.patch(\"/api/returns/:id\", async (req, res) => {\n    try {\n      const parsed = insertReturnSchema.safeParse(req.body);\n      if (!parsed.success) {\n        const error = fromZodError(parsed.error);\n        return res.status(400).json({ error: error.message });\n      }\n\n      const ret = await storage.updateReturn(req.params.id, parsed.data);\n      if (!ret) {\n        return res.status(404).json({ error: \"Return not found\" });\n      }\n      res.json(ret);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update return\" });\n    }\n  });\n\n  // Discount code routes\n  app.get(\"/api/discount-codes\", async (req, res) => {\n    try {\n      const customerEmail = req.query.customerEmail as string | undefined;\n      const codes = await storage.getDiscountCodes(customerEmail);\n      res.json(codes);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch discount codes\" });\n    }\n  });\n\n  app.get(\"/api/discount-codes/:code\", async (req, res) => {\n    try {\n      const code = await storage.getDiscountCode(req.params.code);\n      if (!code) {\n        return res.status(404).json({ error: \"Discount code not found\" });\n      }\n      res.json(code);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch discount code\" });\n    }\n  });\n\n  app.post(\"/api/discount-codes/:code/use\", async (req, res) => {\n    try {\n      const code = await storage.useDiscountCode(req.params.code);\n      if (!code) {\n        return res.status(404).json({ error: \"Discount code not found\" });\n      }\n      res.json(code);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to use discount code\" });\n    }\n  });\n\n  app.delete(\"/api/discount-codes/:id\", async (req, res) => {\n    try {\n      const success = await storage.deleteDiscountCode(req.params.id);\n      if (!success) {\n        return res.status(404).json({ error: \"Discount code not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to delete discount code\" });\n    }\n  });\n\n  // Invoice generation\n  app.get(\"/api/orders/:id/invoice\", async (req, res) => {\n    try {\n      const order = await storage.getOrder(req.params.id);\n      if (!order) {\n        return res.status(404).json({ error: \"Order not found\" });\n      }\n\n      const { pdfService } = await import('./pdf-service');\n      const pdfBuffer = await pdfService.generateInvoice(order);\n      \n      res.setHeader('Content-Type', 'application/pdf');\n      res.setHeader('Content-Disposition', `attachment; filename=\"invoice-${order.orderNumber}.pdf\"`);\n      res.send(pdfBuffer);\n    } catch (error) {\n      console.error('Invoice generation error:', error);\n      res.status(500).json({ error: \"Failed to generate invoice\" });\n    }\n  });\n\n  // Return invoice generation\n  app.get(\"/api/returns/:id/invoice\", async (req, res) => {\n    try {\n      const returnData = await storage.getReturn(req.params.id);\n      if (!returnData) {\n        return res.status(404).json({ error: \"Return not found\" });\n      }\n\n      const order = await storage.getOrder(returnData.orderId);\n      if (!order) {\n        return res.status(404).json({ error: \"Original order not found\" });\n      }\n\n      const { pdfService } = await import('./pdf-service');\n      const pdfBuffer = await pdfService.generateReturnInvoice(returnData, order);\n      \n      res.setHeader('Content-Type', 'application/pdf');\n      res.setHeader('Content-Disposition', `attachment; filename=\"return-invoice-${returnData.returnNumber}.pdf\"`);\n      res.send(pdfBuffer);\n    } catch (error) {\n      console.error('Return invoice generation error:', error);\n      res.status(500).json({ error: \"Failed to generate return invoice\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  return httpServer;\n}\n","size_bytes":15840},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/store-credits.tsx":{"content":"\nimport { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Trash2, Search, Ticket, ShoppingCart } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport type { DiscountCode } from \"@shared/schema\";\nimport { format } from \"date-fns\";\nimport { CreateOrderDialog } from \"@/components/create-order-dialog\";\nimport { UseCreditDialog } from \"@/components/use-credit-dialog\";\n\nexport default function StoreCredits() {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [selectedCredit, setSelectedCredit] = useState<DiscountCode | null>(null);\n  const [useCreditDialogOpen, setUseCreditDialogOpen] = useState(false);\n  const { toast } = useToast();\n\n  const { data: discountCodes = [], isLoading } = useQuery<DiscountCode[]>({\n    queryKey: [\"/api/discount-codes\"],\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      return await apiRequest(\"DELETE\", `/api/discount-codes/${id}`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/discount-codes\"] });\n      toast({\n        title: \"Deleted\",\n        description: \"Store credit has been deleted successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete store credit\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const filteredCodes = discountCodes.filter((code) => {\n    const matchesSearch =\n      code.customerEmail.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      code.code.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesSearch;\n  });\n\n  const unusedCodes = filteredCodes.filter((code) => !code.isUsed);\n  const usedCodes = filteredCodes.filter((code) => code.isUsed);\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"border-b bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex flex-col gap-6\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n              <div>\n                <h1 className=\"text-3xl font-bold tracking-tight\">Store Credits</h1>\n                <p className=\"text-sm text-muted-foreground mt-1\">\n                  Manage customer store credit discount codes\n                </p>\n              </div>\n            </div>\n\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search by customer email or code...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 overflow-auto bg-muted/30\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <div className=\"space-y-6\">\n            <div>\n              <div className=\"flex items-center gap-2 mb-4\">\n                <Ticket className=\"h-5 w-5\" />\n                <h2 className=\"text-xl font-semibold\">Active Store Credits</h2>\n                <span className=\"text-sm text-muted-foreground\">\n                  ({unusedCodes.length})\n                </span>\n              </div>\n\n              {isLoading ? (\n                <Card>\n                  <CardContent className=\"p-6\">\n                    <p className=\"text-center text-muted-foreground\">Loading...</p>\n                  </CardContent>\n                </Card>\n              ) : unusedCodes.length === 0 ? (\n                <Card className=\"border-dashed\">\n                  <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n                    <div className=\"rounded-full bg-muted p-6 mb-4\">\n                      <Ticket className=\"h-10 w-10 text-muted-foreground\" />\n                    </div>\n                    <h3 className=\"text-lg font-semibold mb-2\">No active store credits</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {searchQuery\n                        ? \"No store credits match your search\"\n                        : \"Store credits will appear here when returns are processed\"}\n                    </p>\n                  </CardContent>\n                </Card>\n              ) : (\n                <Card>\n                  <CardContent className=\"p-0\">\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Customer Email</TableHead>\n                          <TableHead>Code</TableHead>\n                          <TableHead>Credit Amount</TableHead>\n                          <TableHead>Issued Date</TableHead>\n                          <TableHead>Expires</TableHead>\n                          <TableHead className=\"text-right\">Actions</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {unusedCodes.map((code) => (\n                          <TableRow key={code.id}>\n                            <TableCell className=\"font-medium\">\n                              {code.customerEmail}\n                            </TableCell>\n                            <TableCell>\n                              <code className=\"bg-muted px-2 py-1 rounded text-sm\">\n                                {code.code}\n                              </code>\n                            </TableCell>\n                            <TableCell className=\"text-green-600 font-semibold\">\n                              ${parseFloat(code.amount).toFixed(2)}\n                            </TableCell>\n                            <TableCell className=\"text-sm text-muted-foreground\">\n                              {code.createdAt\n                                ? format(new Date(code.createdAt), \"MMM dd, yyyy\")\n                                : \"-\"}\n                            </TableCell>\n                            <TableCell className=\"text-sm text-muted-foreground\">\n                              {code.expiresAt\n                                ? format(new Date(code.expiresAt), \"MMM dd, yyyy\")\n                                : \"No expiry\"}\n                            </TableCell>\n                            <TableCell className=\"text-right\">\n                              <div className=\"flex gap-2 justify-end\">\n                                <Button\n                                  variant=\"outline\"\n                                  size=\"sm\"\n                                  onClick={() => {\n                                    setSelectedCredit(code);\n                                    setUseCreditDialogOpen(true);\n                                  }}\n                                >\n                                  <ShoppingCart className=\"h-4 w-4 mr-2\" />\n                                  Use\n                                </Button>\n                                <Button\n                                  variant=\"ghost\"\n                                  size=\"sm\"\n                                  onClick={() => deleteMutation.mutate(code.id)}\n                                  disabled={deleteMutation.isPending}\n                                >\n                                  <Trash2 className=\"h-4 w-4 text-destructive\" />\n                                </Button>\n                              </div>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n\n            {usedCodes.length > 0 && (\n              <div>\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <Ticket className=\"h-5 w-5 text-muted-foreground\" />\n                  <h2 className=\"text-xl font-semibold text-muted-foreground\">\n                    Used Store Credits\n                  </h2>\n                  <span className=\"text-sm text-muted-foreground\">\n                    ({usedCodes.length})\n                  </span>\n                </div>\n\n                <Card>\n                  <CardContent className=\"p-0\">\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Customer Email</TableHead>\n                          <TableHead>Code</TableHead>\n                          <TableHead>Credit Amount</TableHead>\n                          <TableHead>Issued Date</TableHead>\n                          <TableHead>Used Date</TableHead>\n                          <TableHead className=\"text-right\">Actions</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {usedCodes.map((code) => (\n                          <TableRow key={code.id} className=\"opacity-60\">\n                            <TableCell className=\"font-medium\">\n                              {code.customerEmail}\n                            </TableCell>\n                            <TableCell>\n                              <code className=\"bg-muted px-2 py-1 rounded text-sm line-through\">\n                                {code.code}\n                              </code>\n                            </TableCell>\n                            <TableCell className=\"text-muted-foreground\">\n                              ${parseFloat(code.amount).toFixed(2)}\n                            </TableCell>\n                            <TableCell className=\"text-sm text-muted-foreground\">\n                              {code.createdAt\n                                ? format(new Date(code.createdAt), \"MMM dd, yyyy\")\n                                : \"-\"}\n                            </TableCell>\n                            <TableCell className=\"text-sm text-muted-foreground\">\n                              {code.usedAt\n                                ? format(new Date(code.usedAt), \"MMM dd, yyyy\")\n                                : \"-\"}\n                            </TableCell>\n                            <TableCell className=\"text-right\">\n                              <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                onClick={() => deleteMutation.mutate(code.id)}\n                                disabled={deleteMutation.isPending}\n                              >\n                                <Trash2 className=\"h-4 w-4 text-destructive\" />\n                              </Button>\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </CardContent>\n                </Card>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <UseCreditDialog\n        open={useCreditDialogOpen}\n        onOpenChange={setUseCreditDialogOpen}\n        credit={selectedCredit}\n      />\n    </div>\n  );\n}\n","size_bytes":11541},"design_guidelines.md":{"content":"# Design Guidelines: Clothing Inventory & Order Management System\n\n## Design Approach\n\n**Selected Approach**: Design System - Material Design Principles  \n**Justification**: This is a utility-focused, information-dense application where efficiency, data clarity, and learnability are paramount. Material Design provides excellent patterns for data-heavy applications with strong visual hierarchy and interaction feedback.\n\n**Core Principles**:\n- Clarity over decoration - every element serves a functional purpose\n- Efficient data entry and scanning workflows\n- Clear information hierarchy in tables and forms\n- Consistent interaction patterns across inventory and order screens\n\n---\n\n## Typography System\n\n**Font Family**: Inter (via Google Fonts CDN) for primary UI, Roboto Mono for SKU/codes\n\n**Type Scale**:\n- Page Headers: text-3xl font-bold (Inventory, Orders, Create Product)\n- Section Headers: text-xl font-semibold (Product Details, Variant Information)\n- Card Titles: text-lg font-medium\n- Body Text: text-base font-normal\n- Labels: text-sm font-medium uppercase tracking-wide\n- Helper Text: text-sm text-opacity-70\n- Data/Numbers: text-base font-mono (for SKUs, prices, quantities)\n- Table Headers: text-sm font-semibold uppercase\n\n---\n\n## Layout System\n\n**Spacing Primitives**: Tailwind units of 2, 4, 6, 8, 12, 16 for consistent rhythm\n- Component padding: p-4 to p-6\n- Section spacing: space-y-6 to space-y-8\n- Form field gaps: gap-4\n- Card spacing: p-6\n- Button padding: px-6 py-3\n\n**Grid System**:\n- Main container: max-w-7xl mx-auto px-4\n- Two-column layout for forms: grid grid-cols-1 md:grid-cols-2 gap-6\n- Product grid: grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\n- Table layouts: full-width responsive tables with horizontal scroll on mobile\n\n**Layout Structure**:\n- Top navigation bar (h-16) with screen tabs and action buttons\n- Main content area with generous padding (py-8)\n- Sidebar for filters (w-64) on inventory screen\n- Modal overlays for create/edit forms (max-w-4xl)\n\n---\n\n## Component Library\n\n### Navigation\n**Top Navigation Bar**:\n- Fixed header with app title on left\n- Tab navigation between Inventory and Orders screens\n- Action button area on right (Create Product, QR Scanner)\n- Shadow elevation for depth separation\n\n### Data Display Components\n\n**Product Cards** (for grid view):\n- Compact card with product image (aspect-ratio-square)\n- Product name (truncate after 2 lines)\n- SKU badge with monospace font\n- Stock quantity indicator\n- Price display\n- Quick action buttons (Edit, View QR, Delete)\n- Hover state with subtle elevation increase\n\n**Data Table** (for list view):\n- Sticky header row\n- Sortable columns (name, SKU, category, stock, price)\n- Row hover states\n- Action column with icon buttons\n- Responsive: card layout on mobile, table on desktop\n- Pagination controls at bottom (showing 10/25/50/100 items per page)\n\n**QR Code Display Card**:\n- Centered QR code image (size: 256x256px or 300x300px)\n- Product name and SKU below QR\n- Download QR button\n- Print QR button\n- Share/copy functionality\n\n### Form Components\n\n**Create/Edit Product Form** (organized in tabbed sections):\n\n**Tab 1: Basic Information**\n- Product Name: Full-width text input\n- SKU/Product Code: Text input with \"Generate QR\" button adjacent\n- Category: Dropdown select with search\n- Brand: Text input with autocomplete suggestions\n- Description: Textarea (h-32) or rich text editor\n\n**Tab 2: Variant Details** (2-column grid)\n- Color: Multi-select dropdown with color chips\n- Size: Multi-select (S, M, L, XL, XXL)\n- Fabric: Select or text input\n- Pattern: Select dropdown\n- Gender: Radio button group (horizontal)\n\n**Tab 3: Pricing & Stock** (2-column grid)\n- Price: Currency input with symbol prefix\n- Cost Price: Currency input\n- Stock Quantity: Number input with +/- steppers\n- Warehouse: Linked dropdown (if applicable)\n\n**Tab 4: Media & Metadata**\n- Product Image: Drag-and-drop image upload zone (aspect-ratio-square preview)\n- Gallery Images: Multi-image upload with thumbnail preview grid\n- Is Featured: Toggle switch\n- Launch Date: Date picker\n- Rating: Star rating display/input\n- Tags: Tag input with autocomplete (chips display)\n\n**Form Actions**:\n- Bottom-aligned button group\n- Cancel (secondary), Save Draft (secondary), Create Product (primary)\n\n### Input Field Styling\n- Consistent height (h-12 for standard inputs)\n- Border with focus ring\n- Label above input (text-sm font-medium mb-2)\n- Helper text below (text-sm text-opacity-70)\n- Error states with icon and message\n- Required field indicator (asterisk)\n\n### Buttons\n**Primary Actions**: \n- px-6 py-3, rounded-lg, font-medium\n- Examples: Create Product, Save, Confirm Order\n\n**Secondary Actions**:\n- px-4 py-2, rounded-lg, border style\n- Examples: Cancel, Clear Filters, Export\n\n**Icon Buttons**:\n- w-10 h-10, rounded-lg\n- Examples: Edit, Delete, View, QR Scan\n\n**FAB (Floating Action Button)**:\n- Fixed bottom-right position (bottom-8 right-8)\n- Large circular button (w-14 h-14)\n- Quick access to Create Product or Start Scan\n\n### QR Scanner Interface\n**Full-screen modal overlay**:\n- Camera preview taking majority of screen\n- Scanning frame overlay (centered, animated corners)\n- Instructions text at top\n- Cancel button (top-left corner)\n- Manual SKU entry option at bottom\n- Success state with product preview card\n- Error state for unrecognized codes\n\n### Inventory Screen Layout\n**Left Sidebar (w-64, collapsible on mobile)**:\n- Search bar at top\n- Filter sections (accordions):\n  - Category checkboxes\n  - Brand autocomplete\n  - Size multi-select\n  - Price range sliders\n  - Stock status (In Stock, Low Stock, Out of Stock)\n- Apply Filters button\n- Clear All link\n\n**Main Content Area**:\n- Header with title, view toggle (grid/list), Create Product button, QR Scanner button\n- Products count and sorting dropdown\n- Product grid or table\n- Pagination controls\n\n### Order Screen Layout\n**Order List View**:\n- Table with columns: Order ID, Date, Customer, Products, Total, Status\n- Status badges (Pending, Processing, Shipped, Delivered)\n- Row click to view order details\n- Create Order button (top-right)\n\n**Create Order Form**:\n- Customer information section\n- Product selection: Search bar with autocomplete, Add Product button\n- Selected products table (editable quantities)\n- Automatic total calculation\n- Order notes textarea\n- Submit Order button\n\n### Modal Dialogs\n**Delete Confirmation**:\n- Icon warning at top\n- Clear message\n- Product name in bold\n- Cancel and Delete buttons\n\n**Success Toast**:\n- Fixed top-right position (top-4 right-4)\n- Auto-dismiss after 3 seconds\n- Icon, message, close button\n\n---\n\n## Interactions & States\n\n**Loading States**:\n- Skeleton loaders for table rows and cards\n- Spinner for button actions\n- Progress bar for image uploads\n\n**Empty States**:\n- Centered illustration or icon\n- Clear message (\"No products found\")\n- Action button (\"Create Your First Product\")\n\n**Error States**:\n- Inline validation messages for forms\n- Toast notifications for system errors\n- Retry buttons where applicable\n\n**Focus Management**:\n- Visible focus rings on all interactive elements\n- Keyboard navigation support\n- Logical tab order in forms\n\n---\n\n## Responsive Behavior\n\n**Mobile (< 768px)**:\n- Collapsed sidebar with filter button\n- Single column forms\n- Card-based product display\n- Bottom sheet for quick actions\n- Stack navigation tabs\n- Simplified table views (card format)\n\n**Tablet (768px - 1024px)**:\n- Two-column forms\n- Hybrid grid (2 columns)\n- Collapsible sidebar\n- Full table views\n\n**Desktop (> 1024px)**:\n- Three-column product grid\n- Persistent sidebar\n- Full form layout with all tabs visible\n- Enhanced data tables with all columns\n\n---\n\n## Icons\n**Library**: Heroicons (via CDN)\n- Use outline style for navigation and secondary actions\n- Use solid style for primary actions and badges\n- Size: w-5 h-5 for inline icons, w-6 h-6 for buttons\n\n---\n\n## Accessibility\n- All form inputs have associated labels\n- Color is not the only indicator of state\n- Sufficient touch target sizes (minimum 44x44px)\n- Screen reader announcements for dynamic content\n- Keyboard shortcuts documented (e.g., \"N\" for new product, \"/\" for search)\n- High contrast ratios for text and interactive elements\n\n---\n\n## Images\n**Product Images**: Square aspect ratio (1:1), minimum 600x600px recommended, displayed in cards and detail views with object-cover\n**No hero images needed** - this is a utility application focused on data management","size_bytes":8465},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/pages/not-found.tsx":{"content":"import { Link } from \"wouter\";\nimport { Home, Package } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"flex items-center justify-center h-full bg-muted/30 p-4\">\n      <Card className=\"max-w-md w-full\">\n        <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n          <div className=\"rounded-full bg-muted p-6 mb-6\">\n            <Package className=\"h-16 w-16 text-muted-foreground\" />\n          </div>\n          <h1 className=\"text-4xl font-bold mb-2\" data-testid=\"text-404\">404</h1>\n          <h2 className=\"text-2xl font-semibold mb-3\">Page Not Found</h2>\n          <p className=\"text-muted-foreground mb-8 max-w-sm\">\n            The page you're looking for doesn't exist or has been moved.\n          </p>\n          <Link href=\"/\">\n            <Button data-testid=\"button-back-home\">\n              <Home className=\"h-4 w-4 mr-2\" />\n              Back to Inventory\n            </Button>\n          </Link>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":1149},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"server/email-service.ts":{"content":"\nimport nodemailer from 'nodemailer';\n\nexport class EmailService {\n  private transporter;\n\n  constructor() {\n    // Configure with environment variables in production\n    this.transporter = nodemailer.createTransport({\n      host: process.env.SMTP_HOST || 'smtp.gmail.com',\n      port: parseInt(process.env.SMTP_PORT || '587'),\n      secure: false,\n      auth: {\n        user: process.env.SMTP_USER,\n        pass: process.env.SMTP_PASS,\n      },\n    });\n  }\n\n  async sendDiscountCode(email: string, code: string, amount: string, expiresAt: Date) {\n    const mailOptions = {\n      from: process.env.SMTP_FROM || 'noreply@inventory.com',\n      to: email,\n      subject: 'Your Store Credit Discount Code',\n      html: `\n        <div style=\"font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;\">\n          <h2 style=\"color: #333;\">Store Credit Available!</h2>\n          <p>Thank you for your recent return. We've issued you a store credit.</p>\n          \n          <div style=\"background-color: #f5f5f5; padding: 20px; border-radius: 8px; margin: 20px 0;\">\n            <h3 style=\"margin: 0; color: #555;\">Your Discount Code</h3>\n            <p style=\"font-size: 24px; font-weight: bold; color: #4CAF50; margin: 10px 0;\">${code}</p>\n            <p style=\"margin: 5px 0;\"><strong>Credit Amount:</strong> $${amount}</p>\n            <p style=\"margin: 5px 0;\"><strong>Expires:</strong> ${new Date(expiresAt).toLocaleDateString()}</p>\n          </div>\n          \n          <p>Use this code at checkout to apply your store credit to your next purchase.</p>\n          <p style=\"color: #666; font-size: 12px;\">This code is valid for one-time use only.</p>\n        </div>\n      `,\n    };\n\n    try {\n      if (process.env.SMTP_USER && process.env.SMTP_PASS) {\n        await this.transporter.sendMail(mailOptions);\n        console.log(`Discount code email sent to ${email}`);\n      } else {\n        console.log(`Email would be sent to ${email} with code ${code} (SMTP not configured)`);\n      }\n    } catch (error) {\n      console.error('Failed to send email:', error);\n      throw error;\n    }\n  }\n}\n\nexport const emailService = new EmailService();\n","size_bytes":2147},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/product-dialog.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { X, Upload, Sparkles, Calendar as CalendarIcon } from \"lucide-react\";\nimport { nanoid } from \"nanoid\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { insertProductSchema, type Product, type InsertProduct } from \"@shared/schema\";\nimport { cn } from \"@/lib/utils\";\nimport { format } from \"date-fns\";\n\ninterface ProductDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  product?: Product;\n}\n\nexport function ProductDialog({ open, onOpenChange, product }: ProductDialogProps) {\n  const [currentTab, setCurrentTab] = useState(\"basic\");\n  const [tagInput, setTagInput] = useState(\"\");\n  const [isUploading, setIsUploading] = useState(false);\n  const { toast } = useToast();\n\n  const form = useForm<InsertProduct>({\n    resolver: zodResolver(insertProductSchema),\n    defaultValues: product || {\n      productName: \"\",\n      sku: \"\",\n      category: \"\",\n      brand: \"\",\n      description: \"\",\n      color: \"\",\n      size: \"\",\n      fabric: \"\",\n      pattern: \"\",\n      gender: \"\",\n      price: \"0\",\n      costPrice: \"\",\n      stockQuantity: 0,\n      warehouse: \"\",\n      productImage: \"\",\n      galleryImages: [],\n      isFeatured: false,\n      launchDate: undefined,\n      rating: \"\",\n      tags: [],\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertProduct) => {\n      return await apiRequest(\"POST\", \"/api/products\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      toast({\n        title: \"Success\",\n        description: product ? \"Product updated successfully\" : \"Product created successfully\",\n      });\n      onOpenChange(false);\n      form.reset();\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to save product. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async (data: InsertProduct) => {\n      return await apiRequest(\"PATCH\", `/api/products/${product?.id}`, data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      toast({\n        title: \"Success\",\n        description: \"Product updated successfully\",\n      });\n      onOpenChange(false);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update product. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertProduct) => {\n    if (product) {\n      updateMutation.mutate(data);\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const generateSKU = () => {\n    const sku = `SKU-${nanoid(8).toUpperCase()}`;\n    form.setValue(\"sku\", sku);\n  };\n\n  const addTag = () => {\n    if (tagInput.trim()) {\n      const currentTags = form.getValues(\"tags\") || [];\n      form.setValue(\"tags\", [...currentTags, tagInput.trim()]);\n      setTagInput(\"\");\n    }\n  };\n\n  const removeTag = (index: number) => {\n    const currentTags = form.getValues(\"tags\") || [];\n    form.setValue(\"tags\", currentTags.filter((_, i) => i !== index));\n  };\n\n  const isPending = createMutation.isPending || updateMutation.isPending;\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\" data-testid=\"dialog-product\">\n        <DialogHeader>\n          <DialogTitle className=\"text-2xl\">\n            {product ? \"Edit Product\" : \"Create New Product\"}\n          </DialogTitle>\n        </DialogHeader>\n\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n          <Tabs value={currentTab} onValueChange={setCurrentTab}>\n            <TabsList className=\"grid w-full grid-cols-4\">\n              <TabsTrigger value=\"basic\" data-testid=\"tab-basic\">Basic Info</TabsTrigger>\n              <TabsTrigger value=\"variants\" data-testid=\"tab-variants\">Variants</TabsTrigger>\n              <TabsTrigger value=\"pricing\" data-testid=\"tab-pricing\">Pricing & Stock</TabsTrigger>\n              <TabsTrigger value=\"media\" data-testid=\"tab-media\">Media & More</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"basic\" className=\"space-y-6 pt-6\">\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"productName\">Product Name *</Label>\n                <Input\n                  id=\"productName\"\n                  {...form.register(\"productName\")}\n                  placeholder=\"e.g., Men's Cotton T-Shirt\"\n                  data-testid=\"input-product-name\"\n                />\n                {form.formState.errors.productName && (\n                  <p className=\"text-sm text-destructive\">{form.formState.errors.productName.message}</p>\n                )}\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"sku\">SKU / Product Code *</Label>\n                <div className=\"flex gap-2\">\n                  <Input\n                    id=\"sku\"\n                    {...form.register(\"sku\")}\n                    placeholder=\"e.g., SKU-12345\"\n                    className=\"flex-1 font-mono\"\n                    data-testid=\"input-sku\"\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={generateSKU}\n                    data-testid=\"button-generate-sku\"\n                  >\n                    <Sparkles className=\"h-4 w-4 mr-2\" />\n                    Generate\n                  </Button>\n                </div>\n                {form.formState.errors.sku && (\n                  <p className=\"text-sm text-destructive\">{form.formState.errors.sku.message}</p>\n                )}\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"category\">Category *</Label>\n                  <Select\n                    value={form.watch(\"category\")}\n                    onValueChange={(value) => form.setValue(\"category\", value)}\n                  >\n                    <SelectTrigger id=\"category\" data-testid=\"select-category\">\n                      <SelectValue placeholder=\"Select category\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"T-Shirt\">T-Shirt</SelectItem>\n                      <SelectItem value=\"Jeans\">Jeans</SelectItem>\n                      <SelectItem value=\"Dress\">Dress</SelectItem>\n                      <SelectItem value=\"Jacket\">Jacket</SelectItem>\n                      <SelectItem value=\"Shirt\">Shirt</SelectItem>\n                      <SelectItem value=\"Pants\">Pants</SelectItem>\n                      <SelectItem value=\"Skirt\">Skirt</SelectItem>\n                      <SelectItem value=\"Sweater\">Sweater</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  {form.formState.errors.category && (\n                    <p className=\"text-sm text-destructive\">{form.formState.errors.category.message}</p>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"brand\">Brand *</Label>\n                  <Input\n                    id=\"brand\"\n                    {...form.register(\"brand\")}\n                    placeholder=\"e.g., Nike, Adidas\"\n                    data-testid=\"input-brand\"\n                  />\n                  {form.formState.errors.brand && (\n                    <p className=\"text-sm text-destructive\">{form.formState.errors.brand.message}</p>\n                  )}\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"description\">Description</Label>\n                <Textarea\n                  id=\"description\"\n                  {...form.register(\"description\")}\n                  placeholder=\"Describe the product...\"\n                  rows={4}\n                  data-testid=\"input-description\"\n                />\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"variants\" className=\"space-y-6 pt-6\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"color\">Color *</Label>\n                  <Select\n                    value={form.watch(\"color\")}\n                    onValueChange={(value) => form.setValue(\"color\", value)}\n                  >\n                    <SelectTrigger id=\"color\" data-testid=\"select-color\">\n                      <SelectValue placeholder=\"Select color\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"Red\">Red</SelectItem>\n                      <SelectItem value=\"Blue\">Blue</SelectItem>\n                      <SelectItem value=\"Black\">Black</SelectItem>\n                      <SelectItem value=\"White\">White</SelectItem>\n                      <SelectItem value=\"Green\">Green</SelectItem>\n                      <SelectItem value=\"Yellow\">Yellow</SelectItem>\n                      <SelectItem value=\"Gray\">Gray</SelectItem>\n                      <SelectItem value=\"Pink\">Pink</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  {form.formState.errors.color && (\n                    <p className=\"text-sm text-destructive\">{form.formState.errors.color.message}</p>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"size\">Size *</Label>\n                  <Select\n                    value={form.watch(\"size\")}\n                    onValueChange={(value) => form.setValue(\"size\", value)}\n                  >\n                    <SelectTrigger id=\"size\" data-testid=\"select-size\">\n                      <SelectValue placeholder=\"Select size\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"XS\">XS</SelectItem>\n                      <SelectItem value=\"S\">S</SelectItem>\n                      <SelectItem value=\"M\">M</SelectItem>\n                      <SelectItem value=\"L\">L</SelectItem>\n                      <SelectItem value=\"XL\">XL</SelectItem>\n                      <SelectItem value=\"XXL\">XXL</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  {form.formState.errors.size && (\n                    <p className=\"text-sm text-destructive\">{form.formState.errors.size.message}</p>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"fabric\">Fabric</Label>\n                  <Select\n                    value={form.watch(\"fabric\") || \"\"}\n                    onValueChange={(value) => form.setValue(\"fabric\", value)}\n                  >\n                    <SelectTrigger id=\"fabric\" data-testid=\"select-fabric\">\n                      <SelectValue placeholder=\"Select fabric\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"Cotton\">Cotton</SelectItem>\n                      <SelectItem value=\"Polyester\">Polyester</SelectItem>\n                      <SelectItem value=\"Linen\">Linen</SelectItem>\n                      <SelectItem value=\"Silk\">Silk</SelectItem>\n                      <SelectItem value=\"Wool\">Wool</SelectItem>\n                      <SelectItem value=\"Denim\">Denim</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"pattern\">Pattern</Label>\n                  <Select\n                    value={form.watch(\"pattern\") || \"\"}\n                    onValueChange={(value) => form.setValue(\"pattern\", value)}\n                  >\n                    <SelectTrigger id=\"pattern\" data-testid=\"select-pattern\">\n                      <SelectValue placeholder=\"Select pattern\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      <SelectItem value=\"Solid\">Solid</SelectItem>\n                      <SelectItem value=\"Striped\">Striped</SelectItem>\n                      <SelectItem value=\"Checked\">Checked</SelectItem>\n                      <SelectItem value=\"Printed\">Printed</SelectItem>\n                      <SelectItem value=\"Floral\">Floral</SelectItem>\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"gender\">Gender *</Label>\n                <Select\n                  value={form.watch(\"gender\")}\n                  onValueChange={(value) => form.setValue(\"gender\", value)}\n                >\n                  <SelectTrigger id=\"gender\" data-testid=\"select-gender\">\n                    <SelectValue placeholder=\"Select gender\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"Men\">Men</SelectItem>\n                    <SelectItem value=\"Women\">Women</SelectItem>\n                    <SelectItem value=\"Unisex\">Unisex</SelectItem>\n                    <SelectItem value=\"Kids\">Kids</SelectItem>\n                  </SelectContent>\n                </Select>\n                {form.formState.errors.gender && (\n                  <p className=\"text-sm text-destructive\">{form.formState.errors.gender.message}</p>\n                )}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"pricing\" className=\"space-y-6 pt-6\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"price\">Selling Price *</Label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\">$</span>\n                    <Input\n                      id=\"price\"\n                      {...form.register(\"price\")}\n                      type=\"number\"\n                      step=\"0.01\"\n                      placeholder=\"0.00\"\n                      className=\"pl-7\"\n                      data-testid=\"input-price\"\n                    />\n                  </div>\n                  {form.formState.errors.price && (\n                    <p className=\"text-sm text-destructive\">{form.formState.errors.price.message}</p>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"costPrice\">Cost Price</Label>\n                  <div className=\"relative\">\n                    <span className=\"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground\">$</span>\n                    <Input\n                      id=\"costPrice\"\n                      {...form.register(\"costPrice\")}\n                      type=\"number\"\n                      step=\"0.01\"\n                      placeholder=\"0.00\"\n                      className=\"pl-7\"\n                      data-testid=\"input-cost-price\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"stockQuantity\">Stock Quantity *</Label>\n                  <Input\n                    id=\"stockQuantity\"\n                    {...form.register(\"stockQuantity\", { valueAsNumber: true })}\n                    type=\"number\"\n                    placeholder=\"0\"\n                    data-testid=\"input-stock-quantity\"\n                  />\n                  {form.formState.errors.stockQuantity && (\n                    <p className=\"text-sm text-destructive\">{form.formState.errors.stockQuantity.message}</p>\n                  )}\n                </div>\n\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"warehouse\">Warehouse</Label>\n                  <Input\n                    id=\"warehouse\"\n                    {...form.register(\"warehouse\")}\n                    placeholder=\"e.g., Main Warehouse\"\n                    data-testid=\"input-warehouse\"\n                  />\n                </div>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"media\" className=\"space-y-6 pt-6\">\n              <div className=\"space-y-3\">\n                <Label>Product Image</Label>\n                {!form.watch(\"productImage\") ? (\n                  <div className=\"border-2 border-dashed rounded-lg p-8 text-center\">\n                    <Upload className=\"mx-auto h-12 w-12 text-muted-foreground mb-3\" />\n                    <p className=\"text-sm text-muted-foreground mb-4\">\n                      Click upload button to add a product image\n                    </p>\n                    <input\n                      type=\"file\"\n                      id=\"product-image-upload\"\n                      accept=\"image/*\"\n                      className=\"hidden\"\n                      data-testid=\"input-file-product-image\"\n                      onChange={async (e) => {\n                        const file = e.target.files?.[0];\n                        if (!file) return;\n\n                        setIsUploading(true);\n                        try {\n                          const formData = new FormData();\n                          formData.append(\"image\", file);\n\n                          const response = await fetch(\"/api/upload/image\", {\n                            method: \"POST\",\n                            body: formData,\n                          });\n\n                          if (!response.ok) throw new Error(\"Upload failed\");\n\n                          const data = await response.json();\n                          form.setValue(\"productImage\", data.url);\n                          toast({\n                            title: \"Success\",\n                            description: \"Image uploaded successfully\",\n                          });\n                        } catch (error) {\n                          toast({\n                            title: \"Error\",\n                            description: \"Failed to upload image\",\n                            variant: \"destructive\",\n                          });\n                        } finally {\n                          setIsUploading(false);\n                        }\n                      }}\n                    />\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      disabled={isUploading}\n                      onClick={() => document.getElementById(\"product-image-upload\")?.click()}\n                      data-testid=\"button-upload-image\"\n                    >\n                      {isUploading ? (\n                        <>\n                          <Upload className=\"h-4 w-4 mr-2 animate-pulse\" />\n                          Uploading...\n                        </>\n                      ) : (\n                        <>\n                          <Upload className=\"h-4 w-4 mr-2\" />\n                          Upload Image\n                        </>\n                      )}\n                    </Button>\n                    <p className=\"text-xs text-muted-foreground mt-3\">\n                      Or{\" \"}\n                      <button\n                        type=\"button\"\n                        className=\"text-primary hover:underline\"\n                        onClick={() => {\n                          const url = prompt(\"Enter image URL:\");\n                          if (url) form.setValue(\"productImage\", url);\n                        }}\n                      >\n                        enter URL\n                      </button>\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-3\">\n                    <div className=\"relative rounded-lg border overflow-hidden group\">\n                      <img\n                        src={form.watch(\"productImage\")!}\n                        alt=\"Product preview\"\n                        className=\"w-full h-64 object-cover\"\n                        data-testid=\"img-product-preview\"\n                      />\n                      <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2\">\n                        <Button\n                          type=\"button\"\n                          variant=\"secondary\"\n                          size=\"sm\"\n                          onClick={() => {\n                            form.setValue(\"productImage\", \"\");\n                            const input = document.getElementById(\"product-image-upload\") as HTMLInputElement;\n                            if (input) input.value = \"\";\n                          }}\n                          data-testid=\"button-remove-image\"\n                        >\n                          <X className=\"h-4 w-4 mr-2\" />\n                          Remove\n                        </Button>\n                        <Button\n                          type=\"button\"\n                          variant=\"secondary\"\n                          size=\"sm\"\n                          onClick={() => document.getElementById(\"product-image-upload\")?.click()}\n                          data-testid=\"button-change-image\"\n                        >\n                          <Upload className=\"h-4 w-4 mr-2\" />\n                          Change\n                        </Button>\n                      </div>\n                    </div>\n                    <input\n                      type=\"file\"\n                      id=\"product-image-upload\"\n                      accept=\"image/*\"\n                      className=\"hidden\"\n                      data-testid=\"input-file-product-image\"\n                      onChange={async (e) => {\n                        const file = e.target.files?.[0];\n                        if (!file) return;\n\n                        setIsUploading(true);\n                        try {\n                          const formData = new FormData();\n                          formData.append(\"image\", file);\n\n                          const response = await fetch(\"/api/upload/image\", {\n                            method: \"POST\",\n                            body: formData,\n                          });\n\n                          if (!response.ok) throw new Error(\"Upload failed\");\n\n                          const data = await response.json();\n                          form.setValue(\"productImage\", data.url);\n                          toast({\n                            title: \"Success\",\n                            description: \"Image uploaded successfully\",\n                          });\n                        } catch (error) {\n                          toast({\n                            title: \"Error\",\n                            description: \"Failed to upload image\",\n                            variant: \"destructive\",\n                          });\n                        } finally {\n                          setIsUploading(false);\n                        }\n                      }}\n                    />\n                  </div>\n                )}\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label>Gallery Images (Optional)</Label>\n                <div className=\"border-2 border-dashed rounded-lg p-6\">\n                  <input\n                    type=\"file\"\n                    id=\"gallery-images-upload\"\n                    accept=\"image/*\"\n                    multiple\n                    className=\"hidden\"\n                    data-testid=\"input-file-gallery-images\"\n                    onChange={async (e) => {\n                      const files = Array.from(e.target.files || []);\n                      if (files.length === 0) return;\n\n                      setIsUploading(true);\n                      try {\n                        const formData = new FormData();\n                        files.forEach((file) => {\n                          formData.append(\"images\", file);\n                        });\n\n                        const response = await fetch(\"/api/upload/images\", {\n                          method: \"POST\",\n                          body: formData,\n                        });\n\n                        if (!response.ok) throw new Error(\"Upload failed\");\n\n                        const data = await response.json();\n                        const currentGallery = form.watch(\"galleryImages\") || [];\n                        form.setValue(\"galleryImages\", [...currentGallery, ...data.urls]);\n                        toast({\n                          title: \"Success\",\n                          description: `${files.length} image${files.length > 1 ? \"s\" : \"\"} uploaded successfully`,\n                        });\n                        \n                        // Reset file input\n                        e.target.value = \"\";\n                      } catch (error) {\n                        toast({\n                          title: \"Error\",\n                          description: \"Failed to upload images\",\n                          variant: \"destructive\",\n                        });\n                      } finally {\n                        setIsUploading(false);\n                      }\n                    }}\n                  />\n                  <div className=\"text-center\">\n                    <Upload className=\"mx-auto h-8 w-8 text-muted-foreground mb-2\" />\n                    <p className=\"text-sm text-muted-foreground mb-3\">\n                      Add multiple product images to gallery\n                    </p>\n                    <Button\n                      type=\"button\"\n                      variant=\"outline\"\n                      size=\"sm\"\n                      disabled={isUploading}\n                      onClick={() => document.getElementById(\"gallery-images-upload\")?.click()}\n                      data-testid=\"button-upload-gallery\"\n                    >\n                      {isUploading ? (\n                        <>\n                          <Upload className=\"h-4 w-4 mr-2 animate-pulse\" />\n                          Uploading...\n                        </>\n                      ) : (\n                        <>\n                          <Upload className=\"h-4 w-4 mr-2\" />\n                          Upload Images\n                        </>\n                      )}\n                    </Button>\n                  </div>\n                </div>\n\n                {form.watch(\"galleryImages\") && form.watch(\"galleryImages\")!.length > 0 && (\n                  <div className=\"grid grid-cols-3 gap-3\">\n                    {form.watch(\"galleryImages\")!.map((imageUrl, index) => (\n                      <div\n                        key={index}\n                        className=\"relative aspect-square rounded-lg border overflow-hidden group\"\n                        data-testid={`gallery-image-${index}`}\n                      >\n                        <img\n                          src={imageUrl}\n                          alt={`Gallery ${index + 1}`}\n                          className=\"w-full h-full object-cover\"\n                        />\n                        <div className=\"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center\">\n                          <Button\n                            type=\"button\"\n                            variant=\"destructive\"\n                            size=\"sm\"\n                            onClick={() => {\n                              const currentGallery = form.watch(\"galleryImages\") || [];\n                              form.setValue(\n                                \"galleryImages\",\n                                currentGallery.filter((_, i) => i !== index)\n                              );\n                            }}\n                            data-testid={`button-remove-gallery-${index}`}\n                          >\n                            <X className=\"h-4 w-4 mr-1\" />\n                            Remove\n                          </Button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                <div className=\"space-y-0.5\">\n                  <Label htmlFor=\"isFeatured\">Featured Product</Label>\n                  <p className=\"text-sm text-muted-foreground\">Mark this product as featured</p>\n                </div>\n                <Switch\n                  id=\"isFeatured\"\n                  checked={form.watch(\"isFeatured\") || false}\n                  onCheckedChange={(checked) => form.setValue(\"isFeatured\", checked)}\n                  data-testid=\"switch-featured\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label>Launch Date</Label>\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      className={cn(\n                        \"w-full justify-start text-left font-normal\",\n                        !form.watch(\"launchDate\") && \"text-muted-foreground\"\n                      )}\n                      data-testid=\"button-launch-date\"\n                    >\n                      <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                      {form.watch(\"launchDate\") ? (\n                        format(new Date(form.watch(\"launchDate\")!), \"PPP\")\n                      ) : (\n                        <span>Pick a date</span>\n                      )}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0\">\n                    <Calendar\n                      mode=\"single\"\n                      selected={form.watch(\"launchDate\") ? new Date(form.watch(\"launchDate\")!) : undefined}\n                      onSelect={(date) => form.setValue(\"launchDate\", date)}\n                    />\n                  </PopoverContent>\n                </Popover>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"rating\">Rating</Label>\n                <Input\n                  id=\"rating\"\n                  {...form.register(\"rating\")}\n                  type=\"number\"\n                  step=\"0.1\"\n                  min=\"0\"\n                  max=\"5\"\n                  placeholder=\"0.0 - 5.0\"\n                  data-testid=\"input-rating\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label>Tags</Label>\n                <div className=\"flex gap-2\">\n                  <Input\n                    value={tagInput}\n                    onChange={(e) => setTagInput(e.target.value)}\n                    placeholder=\"Add a tag...\"\n                    onKeyDown={(e) => {\n                      if (e.key === \"Enter\") {\n                        e.preventDefault();\n                        addTag();\n                      }\n                    }}\n                    data-testid=\"input-tag\"\n                  />\n                  <Button type=\"button\" variant=\"outline\" onClick={addTag} data-testid=\"button-add-tag\">\n                    Add\n                  </Button>\n                </div>\n                {form.watch(\"tags\") && form.watch(\"tags\")!.length > 0 && (\n                  <div className=\"flex flex-wrap gap-2 mt-3\">\n                    {form.watch(\"tags\")!.map((tag, index) => (\n                      <Badge key={index} variant=\"secondary\" className=\"pl-3 pr-1\">\n                        {tag}\n                        <button\n                          type=\"button\"\n                          onClick={() => removeTag(index)}\n                          className=\"ml-2 rounded-full hover:bg-muted p-0.5\"\n                          data-testid={`button-remove-tag-${index}`}\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      </Badge>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </TabsContent>\n          </Tabs>\n\n          <div className=\"flex justify-end gap-3 pt-6 border-t\">\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n              disabled={isPending}\n              data-testid=\"button-cancel\"\n            >\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={isPending} data-testid=\"button-submit\">\n              {isPending ? \"Saving...\" : product ? \"Update Product\" : \"Create Product\"}\n            </Button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":33681},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/delete-product-dialog.tsx":{"content":"import { useMutation } from \"@tanstack/react-query\";\nimport { AlertTriangle } from \"lucide-react\";\nimport {\n  AlertDialog,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport type { Product } from \"@shared/schema\";\n\ninterface DeleteProductDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  product: Product;\n}\n\nexport function DeleteProductDialog({\n  open,\n  onOpenChange,\n  product,\n}: DeleteProductDialogProps) {\n  const { toast } = useToast();\n\n  const deleteMutation = useMutation({\n    mutationFn: async () => {\n      return await apiRequest(\"DELETE\", `/api/products/${product.id}`, null);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/products\"] });\n      toast({\n        title: \"Success\",\n        description: \"Product deleted successfully\",\n      });\n      onOpenChange(false);\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete product. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent data-testid=\"dialog-delete-product\">\n        <AlertDialogHeader>\n          <div className=\"flex items-center gap-3\">\n            <div className=\"rounded-full bg-destructive/10 p-3\">\n              <AlertTriangle className=\"h-6 w-6 text-destructive\" />\n            </div>\n            <AlertDialogTitle>Delete Product</AlertDialogTitle>\n          </div>\n          <AlertDialogDescription className=\"pt-3\">\n            Are you sure you want to delete{\" \"}\n            <span className=\"font-semibold text-foreground\">{product.productName}</span>?\n            This action cannot be undone.\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <Button\n            variant=\"outline\"\n            onClick={() => onOpenChange(false)}\n            disabled={deleteMutation.isPending}\n            data-testid=\"button-cancel-delete\"\n          >\n            Cancel\n          </Button>\n          <Button\n            variant=\"destructive\"\n            onClick={() => deleteMutation.mutate()}\n            disabled={deleteMutation.isPending}\n            data-testid=\"button-confirm-delete\"\n          >\n            {deleteMutation.isPending ? \"Deleting...\" : \"Delete\"}\n          </Button>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}","size_bytes":2692},"server/db.ts":{"content":"\nimport { drizzle } from 'drizzle-orm/neon-http';\nimport { neon } from '@neondatabase/serverless';\n\n// For development, we'll use a local in-memory database simulation\n// In production, this would connect to a real Neon database\nconst connectionString = process.env.DATABASE_URL || '';\n\nlet sql: ReturnType<typeof neon>;\nlet db: ReturnType<typeof drizzle>;\n\nif (connectionString) {\n  sql = neon(connectionString);\n  db = drizzle(sql);\n} else {\n  // Fallback for development without a database\n  // This creates a minimal mock that allows the app to run\n  const mockSql = (() => {\n    const mock: any = async () => ({ rows: [] });\n    mock.transaction = async (cb: any) => cb(mock);\n    return mock;\n  })();\n  \n  sql = mockSql as any;\n  db = drizzle(mockSql as any);\n}\n\nexport { db, sql };\n","size_bytes":789},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"server/qr-service.ts":{"content":"import QRCode from \"qrcode\";\n\nexport class QRCodeService {\n  /**\n   * Generate a QR code as a data URL\n   */\n  async generateQRCode(data: string): Promise<string> {\n    try {\n      const qrCodeDataURL = await QRCode.toDataURL(data, {\n        errorCorrectionLevel: \"H\",\n        margin: 2,\n        width: 512,\n      });\n      return qrCodeDataURL;\n    } catch (error) {\n      throw new Error(\"Failed to generate QR code\");\n    }\n  }\n\n  /**\n   * Generate a QR code as a buffer\n   */\n  async generateQRCodeBuffer(data: string): Promise<Buffer> {\n    try {\n      const buffer = await QRCode.toBuffer(data, {\n        errorCorrectionLevel: \"H\",\n        margin: 2,\n        width: 512,\n      });\n      return buffer;\n    } catch (error) {\n      throw new Error(\"Failed to generate QR code buffer\");\n    }\n  }\n}\n\nexport const qrCodeService = new QRCodeService();\n","size_bytes":853},"client/src/pages/stock-history.tsx":{"content":"import { useState, useMemo } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { TrendingUp, TrendingDown, RefreshCw, Package, QrCode, ShoppingCart, Truck, ArrowUpDown, ArrowUp, ArrowDown } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { QRScannerDialog } from \"@/components/qr-scanner-dialog\";\nimport { StockMovementDialog } from \"@/components/stock-movement-dialog\";\nimport type { StockMovement, Product } from \"@shared/schema\";\nimport { format } from \"date-fns\";\n\ntype SortField = \"productName\" | \"sku\" | \"category\" | \"available\" | \"sold\" | \"returned\";\ntype SortOrder = \"asc\" | \"desc\";\n\nexport default function StockHistory() {\n  const [isScannerOpen, setIsScannerOpen] = useState(false);\n  const [isStockDialogOpen, setIsStockDialogOpen] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\n  const [sortField, setSortField] = useState<SortField>(\"productName\");\n  const [sortOrder, setSortOrder] = useState<SortOrder>(\"asc\");\n  const [categoryFilter, setCategoryFilter] = useState<string>(\"all\");\n\n  const { data: movements = [], isLoading } = useQuery<StockMovement[]>({\n    queryKey: [\"/api/stock-movements\"],\n  });\n\n  const { data: products = [] } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  const { data: orders = [] } = useQuery<any[]>({\n    queryKey: [\"/api/orders\"],\n  });\n\n  const { data: returns = [] } = useQuery<any[]>({\n    queryKey: [\"/api/returns\"],\n  });\n\n  // Calculate statistics\n  const statistics = useMemo(() => {\n    const totalSold = movements\n      .filter(m => m.type === \"out\" && m.reason === \"sale\")\n      .reduce((sum, m) => sum + m.quantity, 0);\n    \n    const totalReturned = movements\n      .filter(m => m.type === \"in\" && m.reason === \"return\")\n      .reduce((sum, m) => sum + m.quantity, 0);\n    \n    const totalAvailable = products.reduce((sum, p) => sum + p.stockQuantity, 0);\n\n    return {\n      available: totalAvailable,\n      sold: totalSold,\n      returned: totalReturned,\n    };\n  }, [movements, products]);\n\n  // Calculate per-product statistics\n  const productStats = useMemo(() => {\n    return products.map(product => {\n      const sold = movements\n        .filter(m => m.productId === product.id && m.type === \"out\" && m.reason === \"sale\")\n        .reduce((sum, m) => sum + m.quantity, 0);\n      \n      const returned = movements\n        .filter(m => m.productId === product.id && m.type === \"in\" && m.reason === \"return\")\n        .reduce((sum, m) => sum + m.quantity, 0);\n\n      return {\n        ...product,\n        sold,\n        returned,\n        available: product.stockQuantity,\n      };\n    });\n  }, [products, movements]);\n\n  // Get unique categories\n  const categories = useMemo(() => {\n    return [\"all\", ...new Set(products.map(p => p.category))];\n  }, [products]);\n\n  // Group orders with their returns\n  const groupedTransactions = useMemo(() => {\n    const transactions: any[] = [];\n\n    // Add all orders\n    orders.forEach(order => {\n      const orderReturns = returns.filter(ret => ret.orderId === order.id);\n      transactions.push({\n        type: 'order',\n        data: order,\n        returns: orderReturns,\n        date: order.createdAt,\n      });\n    });\n\n    // Add standalone returns (if any without order)\n    returns.forEach(ret => {\n      if (!ret.orderId) {\n        transactions.push({\n          type: 'return',\n          data: ret,\n          returns: [],\n          date: ret.createdAt,\n        });\n      }\n    });\n\n    return transactions.sort((a, b) => {\n      const dateA = new Date(a.date).getTime();\n      const dateB = new Date(b.date).getTime();\n      return dateB - dateA;\n    });\n  }, [orders, returns]);\n\n  // Filter and sort products\n  const filteredAndSortedProducts = useMemo(() => {\n    let filtered = productStats;\n\n    // Apply category filter\n    if (categoryFilter !== \"all\") {\n      filtered = filtered.filter(p => p.category === categoryFilter);\n    }\n\n    // Apply sorting\n    return filtered.sort((a, b) => {\n      let aValue: string | number;\n      let bValue: string | number;\n\n      switch (sortField) {\n        case \"productName\":\n          aValue = a.productName.toLowerCase();\n          bValue = b.productName.toLowerCase();\n          break;\n        case \"sku\":\n          aValue = a.sku.toLowerCase();\n          bValue = b.sku.toLowerCase();\n          break;\n        case \"category\":\n          aValue = a.category.toLowerCase();\n          bValue = b.category.toLowerCase();\n          break;\n        case \"available\":\n          aValue = a.available;\n          bValue = b.available;\n          break;\n        case \"sold\":\n          aValue = a.sold;\n          bValue = b.sold;\n          break;\n        case \"returned\":\n          aValue = a.returned;\n          bValue = b.returned;\n          break;\n        default:\n          aValue = a.productName.toLowerCase();\n          bValue = b.productName.toLowerCase();\n      }\n\n      if (sortOrder === \"asc\") {\n        return aValue > bValue ? 1 : aValue < bValue ? -1 : 0;\n      } else {\n        return aValue < bValue ? 1 : aValue > bValue ? -1 : 0;\n      }\n    });\n  }, [productStats, categoryFilter, sortField, sortOrder]);\n\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortOrder(sortOrder === \"asc\" ? \"desc\" : \"asc\");\n    } else {\n      setSortField(field);\n      setSortOrder(\"asc\");\n    }\n  };\n\n  const SortIcon = ({ field }: { field: SortField }) => {\n    if (sortField !== field) {\n      return <ArrowUpDown className=\"h-4 w-4 ml-1\" />;\n    }\n    return sortOrder === \"asc\" ? (\n      <ArrowUp className=\"h-4 w-4 ml-1\" />\n    ) : (\n      <ArrowDown className=\"h-4 w-4 ml-1\" />\n    );\n  };\n\n  const getIcon = (type: string) => {\n    switch (type) {\n      case \"in\":\n        return <TrendingUp className=\"h-5 w-5 text-green-600\" />;\n      case \"out\":\n        return <TrendingDown className=\"h-5 w-5 text-red-600\" />;\n      case \"adjustment\":\n        return <RefreshCw className=\"h-5 w-5 text-blue-600\" />;\n      default:\n        return <Package className=\"h-5 w-5\" />;\n    }\n  };\n\n  const getBadgeVariant = (type: string) => {\n    switch (type) {\n      case \"in\":\n        return \"default\" as const;\n      case \"out\":\n        return \"destructive\" as const;\n      case \"adjustment\":\n        return \"secondary\" as const;\n      default:\n        return \"outline\" as const;\n    }\n  };\n\n  const handleScan = (scannedData: string) => {\n    // Assuming the scanned data is a product SKU or ID\n    // You might need to fetch product details based on this scanned data\n    console.log(\"Scanned data:\", scannedData);\n    // For now, let's assume we can directly use it to open the stock movement dialog\n    // In a real scenario, you'd fetch product details here\n    setSelectedProduct({ id: scannedData, name: `Product ${scannedData}`, sku: scannedData }); // Mock product data\n    setIsStockDialogOpen(true);\n    setIsScannerOpen(false);\n  };\n\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"border-b bg-background\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold tracking-tight\">\n                Stock Movement History\n              </h1>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Track all inventory movements and changes\n              </p>\n            </div>\n            <Button\n              onClick={() => setIsScannerOpen(true)}\n              data-testid=\"button-scan-for-stock\"\n            >\n              <QrCode className=\"h-4 w-4 mr-2\" />\n              Scan to Update Stock\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 overflow-auto bg-muted/30\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          {/* Statistics Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Available Stock\n                </CardTitle>\n                <Package className=\"h-4 w-4 text-muted-foreground\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\" data-testid=\"stat-available\">\n                  {statistics.available.toLocaleString()}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Total units in inventory\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Total Returned\n                </CardTitle>\n                <RefreshCw className=\"h-4 w-4 text-blue-600\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-blue-600\" data-testid=\"stat-returned\">\n                  {statistics.returned.toLocaleString()}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Units returned to inventory\n                </p>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">\n                  Total Sold\n                </CardTitle>\n                <ShoppingCart className=\"h-4 w-4 text-red-600\" />\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold text-red-600\" data-testid=\"stat-sold\">\n                  {statistics.sold.toLocaleString()}\n                </div>\n                <p className=\"text-xs text-muted-foreground\">\n                  Units removed from inventory\n                </p>\n              </CardContent>\n            </Card>\n          </div>\n\n          {/* Product Stock Table */}\n          <Card className=\"mb-8\">\n            <CardHeader>\n              <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n                <CardTitle>Product Stock Overview</CardTitle>\n                <div className=\"flex items-center gap-2\">\n                  <span className=\"text-sm text-muted-foreground\">Category:</span>\n                  <Select value={categoryFilter} onValueChange={setCategoryFilter}>\n                    <SelectTrigger className=\"w-[180px]\">\n                      <SelectValue placeholder=\"All Categories\" />\n                    </SelectTrigger>\n                    <SelectContent>\n                      {categories.map((category) => (\n                        <SelectItem key={category} value={category}>\n                          {category === \"all\" ? \"All Categories\" : category}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                </div>\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"rounded-md border\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>\n                        <Button\n                          variant=\"ghost\"\n                          onClick={() => handleSort(\"productName\")}\n                          className=\"hover:bg-transparent p-0 h-auto font-medium\"\n                        >\n                          Product Name\n                          <SortIcon field=\"productName\" />\n                        </Button>\n                      </TableHead>\n                      <TableHead>\n                        <Button\n                          variant=\"ghost\"\n                          onClick={() => handleSort(\"sku\")}\n                          className=\"hover:bg-transparent p-0 h-auto font-medium\"\n                        >\n                          SKU\n                          <SortIcon field=\"sku\" />\n                        </Button>\n                      </TableHead>\n                      <TableHead>\n                        <Button\n                          variant=\"ghost\"\n                          onClick={() => handleSort(\"category\")}\n                          className=\"hover:bg-transparent p-0 h-auto font-medium\"\n                        >\n                          Category\n                          <SortIcon field=\"category\" />\n                        </Button>\n                      </TableHead>\n                      <TableHead className=\"text-right\">\n                        <Button\n                          variant=\"ghost\"\n                          onClick={() => handleSort(\"available\")}\n                          className=\"hover:bg-transparent p-0 h-auto font-medium ml-auto flex\"\n                        >\n                          Available\n                          <SortIcon field=\"available\" />\n                        </Button>\n                      </TableHead>\n                      <TableHead className=\"text-right\">\n                        <Button\n                          variant=\"ghost\"\n                          onClick={() => handleSort(\"sold\")}\n                          className=\"hover:bg-transparent p-0 h-auto font-medium ml-auto flex\"\n                        >\n                          Sold\n                          <SortIcon field=\"sold\" />\n                        </Button>\n                      </TableHead>\n                      <TableHead className=\"text-right\">\n                        <Button\n                          variant=\"ghost\"\n                          onClick={() => handleSort(\"returned\")}\n                          className=\"hover:bg-transparent p-0 h-auto font-medium ml-auto flex\"\n                        >\n                          Returned\n                          <SortIcon field=\"returned\" />\n                        </Button>\n                      </TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {filteredAndSortedProducts.length === 0 ? (\n                      <TableRow>\n                        <TableCell colSpan={6} className=\"text-center py-8 text-muted-foreground\">\n                          No products found\n                        </TableCell>\n                      </TableRow>\n                    ) : (\n                      filteredAndSortedProducts.map((product) => (\n                        <TableRow key={product.id} className=\"cursor-pointer hover:bg-muted/50\">\n                          <TableCell className=\"font-medium\">{product.productName}</TableCell>\n                          <TableCell className=\"font-mono text-sm\">{product.sku}</TableCell>\n                          <TableCell>\n                            <Badge variant=\"outline\">{product.category}</Badge>\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            <span className={`font-semibold ${\n                              product.available === 0 \n                                ? \"text-red-600\" \n                                : product.available < 10 \n                                ? \"text-yellow-600\" \n                                : \"text-green-600\"\n                            }`}>\n                              {product.available}\n                            </span>\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            <span className=\"text-red-600 font-semibold\">{product.sold}</span>\n                          </TableCell>\n                          <TableCell className=\"text-right\">\n                            <span className=\"text-blue-600 font-semibold\">{product.returned}</span>\n                          </TableCell>\n                        </TableRow>\n                      ))\n                    )}\n                  </TableBody>\n                </Table>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Stock Movement History */}\n          <div className=\"mb-4\">\n            <h2 className=\"text-xl font-semibold mb-2\">Order & Return History</h2>\n            <p className=\"text-sm text-muted-foreground\" data-testid=\"text-movement-count\">\n              {groupedTransactions.length} {groupedTransactions.length === 1 ? \"transaction\" : \"transactions\"}\n            </p>\n          </div>\n\n          {isLoading ? (\n            <div className=\"flex flex-col gap-4\">\n              {[...Array(5)].map((_, i) => (\n                <Card key={i}>\n                  <CardContent className=\"p-6\">\n                    <Skeleton className=\"h-20 w-full\" />\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : groupedTransactions.length === 0 ? (\n            <Card className=\"border-dashed\">\n              <CardContent className=\"flex flex-col items-center justify-center py-16 text-center\">\n                <div className=\"rounded-full bg-muted p-6 mb-4\">\n                  <ShoppingCart className=\"h-10 w-10 text-muted-foreground\" />\n                </div>\n                <h3 className=\"text-lg font-semibold mb-2\" data-testid=\"text-empty-state\">\n                  No transactions yet\n                </h3>\n                <p className=\"text-sm text-muted-foreground\">\n                  Orders and returns will appear here as you manage your inventory\n                </p>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"flex flex-col gap-4\">\n              {groupedTransactions.map((transaction, idx) => {\n                const isOrder = transaction.type === 'order';\n                const order = isOrder ? transaction.data : null;\n                const returnData = !isOrder ? transaction.data : null;\n                \n                return (\n                  <Card key={`${transaction.type}-${isOrder ? order?.id : returnData?.id}-${idx}`} className=\"hover-elevate\">\n                    <CardContent className=\"p-6\">\n                      {isOrder && order ? (\n                        <div className=\"space-y-4\">\n                          <div className=\"flex items-start gap-4\">\n                            <div className=\"rounded-lg bg-muted p-3 flex items-center justify-center flex-shrink-0\">\n                              <ShoppingCart className=\"h-5 w-5 text-blue-600\" />\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <div className=\"flex items-start justify-between gap-4 mb-2\">\n                                <div className=\"flex-1 min-w-0\">\n                                  <h3 className=\"font-semibold text-lg\">\n                                    Order {order.orderNumber}\n                                  </h3>\n                                  <p className=\"text-sm text-muted-foreground\">\n                                    Customer: {order.customerName}\n                                  </p>\n                                </div>\n                                <Badge variant=\"default\">\n                                  Order\n                                </Badge>\n                              </div>\n                              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4\">\n                                <div>\n                                  <p className=\"text-sm text-muted-foreground\">Total Items</p>\n                                  <p className=\"font-semibold\">\n                                    {order.items?.reduce((sum: number, item: any) => sum + item.quantity, 0) || 0} units\n                                  </p>\n                                </div>\n                                <div>\n                                  <p className=\"text-sm text-muted-foreground\">Status</p>\n                                  <p className=\"font-semibold capitalize\">{order.status}</p>\n                                </div>\n                                <div>\n                                  <p className=\"text-sm text-muted-foreground\">Date</p>\n                                  <p className=\"font-semibold\">\n                                    {order.createdAt && format(new Date(order.createdAt), \"MMM dd, yyyy HH:mm\")}\n                                  </p>\n                                </div>\n                              </div>\n                              {order.items && order.items.length > 0 && (\n                                <div className=\"mt-3 pt-3 border-t\">\n                                  <p className=\"text-sm text-muted-foreground mb-2\">Products:</p>\n                                  <div className=\"space-y-1\">\n                                    {order.items.map((item: any, itemIdx: number) => (\n                                      <p key={itemIdx} className=\"text-sm\">\n                                        • {item.productName} - {item.quantity} units (SKU: {item.sku})\n                                      </p>\n                                    ))}\n                                  </div>\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                          \n                          {transaction.returns.length > 0 && (\n                            <div className=\"ml-16 space-y-3 pt-3 border-t\">\n                              <p className=\"text-sm font-medium text-muted-foreground\">Associated Returns:</p>\n                              {transaction.returns.map((ret: any, retIdx: number) => (\n                                <div key={retIdx} className=\"flex items-start gap-4 bg-muted/50 p-4 rounded-lg\">\n                                  <div className=\"rounded-lg bg-background p-2 flex items-center justify-center flex-shrink-0\">\n                                    <RefreshCw className=\"h-4 w-4 text-blue-600\" />\n                                  </div>\n                                  <div className=\"flex-1 min-w-0\">\n                                    <div className=\"flex items-start justify-between gap-4 mb-2\">\n                                      <div className=\"flex-1 min-w-0\">\n                                        <h4 className=\"font-semibold\">\n                                          Return {ret.returnNumber}\n                                        </h4>\n                                        <p className=\"text-sm text-muted-foreground\">\n                                          Reason: {ret.reason}\n                                        </p>\n                                      </div>\n                                      <Badge variant=\"secondary\">\n                                        Return\n                                      </Badge>\n                                    </div>\n                                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-2\">\n                                      <div>\n                                        <p className=\"text-sm text-muted-foreground\">Total Items</p>\n                                        <p className=\"font-semibold\">\n                                          {ret.items?.reduce((sum: number, item: any) => sum + item.quantity, 0) || 0} units\n                                        </p>\n                                      </div>\n                                      <div>\n                                        <p className=\"text-sm text-muted-foreground\">Date</p>\n                                        <p className=\"font-semibold\">\n                                          {ret.createdAt && format(new Date(ret.createdAt), \"MMM dd, yyyy HH:mm\")}\n                                        </p>\n                                      </div>\n                                    </div>\n                                    {ret.items && ret.items.length > 0 && (\n                                      <div className=\"mt-2\">\n                                        <p className=\"text-sm text-muted-foreground mb-1\">Products:</p>\n                                        <div className=\"space-y-1\">\n                                          {ret.items.map((item: any, itemIdx: number) => (\n                                            <p key={itemIdx} className=\"text-sm\">\n                                              • {item.productName} - {item.quantity} units (SKU: {item.sku})\n                                            </p>\n                                          ))}\n                                        </div>\n                                      </div>\n                                    )}\n                                  </div>\n                                </div>\n                              ))}\n                            </div>\n                          )}\n                        </div>\n                      ) : returnData ? (\n                        <div className=\"flex items-start gap-4\">\n                          <div className=\"rounded-lg bg-muted p-3 flex items-center justify-center flex-shrink-0\">\n                            <RefreshCw className=\"h-5 w-5 text-blue-600\" />\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <div className=\"flex items-start justify-between gap-4 mb-2\">\n                              <div className=\"flex-1 min-w-0\">\n                                <h3 className=\"font-semibold text-lg\">\n                                  Return {returnData.returnNumber}\n                                </h3>\n                                <p className=\"text-sm text-muted-foreground\">\n                                  Reason: {returnData.reason}\n                                </p>\n                              </div>\n                              <Badge variant=\"secondary\">\n                                Standalone Return\n                              </Badge>\n                            </div>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4\">\n                              <div>\n                                <p className=\"text-sm text-muted-foreground\">Total Items</p>\n                                <p className=\"font-semibold\">\n                                  {returnData.items?.reduce((sum: number, item: any) => sum + item.quantity, 0) || 0} units\n                                </p>\n                              </div>\n                              <div>\n                                <p className=\"text-sm text-muted-foreground\">Date</p>\n                                <p className=\"font-semibold\">\n                                  {returnData.createdAt && format(new Date(returnData.createdAt), \"MMM dd, yyyy HH:mm\")}\n                                </p>\n                              </div>\n                            </div>\n                            {returnData.items && returnData.items.length > 0 && (\n                              <div className=\"mt-3 pt-3 border-t\">\n                                <p className=\"text-sm text-muted-foreground mb-2\">Products:</p>\n                                <div className=\"space-y-1\">\n                                  {returnData.items.map((item: any, itemIdx: number) => (\n                                    <p key={itemIdx} className=\"text-sm\">\n                                      • {item.productName} - {item.quantity} units (SKU: {item.sku})\n                                    </p>\n                                  ))}\n                                </div>\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      ) : null}\n                    </CardContent>\n                  </Card>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n      <QRScannerDialog\n        open={isScannerOpen}\n        onOpenChange={setIsScannerOpen}\n        onProductScanned={(product) => {\n          setSelectedProduct(product);\n          setIsStockDialogOpen(true);\n          setIsScannerOpen(false);\n        }}\n      />\n      {selectedProduct && (\n        <StockMovementDialog\n          open={isStockDialogOpen}\n          onOpenChange={(open) => {\n            setIsStockDialogOpen(open);\n            if (!open) setSelectedProduct(null);\n          }}\n          product={selectedProduct}\n        />\n      )}\n    </div>\n  );\n}","size_bytes":29047},"server/pdf-service.ts":{"content":"\nimport PDFDocument from 'pdfkit';\nimport type { OrderWithItems, ReturnWithItems } from '@shared/schema';\n\nexport class PDFService {\n  async generateReturnInvoice(returnData: ReturnWithItems, order: OrderWithItems): Promise<Buffer> {\n    return new Promise((resolve, reject) => {\n      try {\n        const doc = new PDFDocument({ margin: 50 });\n        const buffers: Buffer[] = [];\n\n        doc.on('data', buffers.push.bind(buffers));\n        doc.on('end', () => {\n          const pdfBuffer = Buffer.concat(buffers);\n          resolve(pdfBuffer);\n        });\n\n        // Header\n        doc.fontSize(20).text('RETURN/EXCHANGE INVOICE', { align: 'center' });\n        doc.moveDown();\n\n        // Return details\n        doc.fontSize(10);\n        doc.text(`Return Number: ${returnData.returnNumber}`, { align: 'right' });\n        doc.text(`Original Order: ${returnData.orderNumber}`, { align: 'right' });\n        doc.text(`Date: ${new Date(returnData.createdAt).toLocaleDateString()}`, { align: 'right' });\n        doc.moveDown();\n\n        // Customer details\n        doc.fontSize(12).text('Customer:', { underline: true });\n        doc.fontSize(10);\n        doc.text(returnData.customerName);\n        if (returnData.customerEmail) doc.text(returnData.customerEmail);\n        doc.moveDown();\n\n        // Returned items table\n        let tableTop = doc.y;\n        doc.fontSize(12).font('Helvetica-Bold');\n        doc.text('Returned Items:', 50, tableTop);\n        doc.moveDown(0.5);\n        \n        tableTop = doc.y;\n        doc.fontSize(10);\n        doc.text('Item', 50, tableTop);\n        doc.text('SKU', 200, tableTop);\n        doc.text('Qty', 320, tableTop);\n        doc.text('Price', 380, tableTop);\n        doc.text('Total', 480, tableTop, { align: 'right' });\n        \n        doc.moveTo(50, tableTop + 15).lineTo(550, tableTop + 15).stroke();\n        \n        doc.font('Helvetica');\n        let yPosition = tableTop + 25;\n        \n        let totalReturnValue = 0;\n        returnData.items.forEach((item) => {\n          doc.text(item.productName, 50, yPosition, { width: 140 });\n          doc.text(item.sku, 200, yPosition);\n          doc.text(item.quantity.toString(), 320, yPosition);\n          doc.text(`$${item.unitPrice}`, 380, yPosition);\n          doc.text(`$${item.subtotal}`, 480, yPosition, { align: 'right' });\n          totalReturnValue += parseFloat(item.subtotal);\n          yPosition += 25;\n        });\n\n        // Exchange items if any\n        const exchangeItems = returnData.items.filter(item => item.exchangeProductId);\n        if (exchangeItems.length > 0) {\n          yPosition += 10;\n          doc.fontSize(12).font('Helvetica-Bold');\n          doc.text('Exchange Items:', 50, yPosition);\n          doc.moveDown(0.5);\n          \n          yPosition = doc.y;\n          doc.fontSize(10);\n          doc.text('Item', 50, yPosition);\n          doc.text('Qty', 320, yPosition);\n          doc.text('Price', 380, yPosition);\n          doc.text('Total', 480, yPosition, { align: 'right' });\n          \n          doc.moveTo(50, yPosition + 15).lineTo(550, yPosition + 15).stroke();\n          \n          doc.font('Helvetica');\n          yPosition += 25;\n          \n          let totalExchangeValue = 0;\n          exchangeItems.forEach((item) => {\n            if (item.exchangeProductName) {\n              const exchangeTotal = parseFloat(returnData.exchangeValue || '0') / exchangeItems.length;\n              doc.text(item.exchangeProductName, 50, yPosition, { width: 260 });\n              doc.text(item.quantity.toString(), 320, yPosition);\n              doc.text(`$${(exchangeTotal / item.quantity).toFixed(2)}`, 380, yPosition);\n              doc.text(`$${exchangeTotal.toFixed(2)}`, 480, yPosition, { align: 'right' });\n              totalExchangeValue += exchangeTotal;\n              yPosition += 25;\n            }\n          });\n        }\n\n        // Financial Summary\n        doc.moveTo(50, yPosition).lineTo(550, yPosition).stroke();\n        yPosition += 15;\n        doc.fontSize(10).font('Helvetica');\n        \n        doc.text('Return Value:', 320, yPosition);\n        doc.text(`$${totalReturnValue.toFixed(2)}`, 480, yPosition, { align: 'right' });\n        yPosition += 20;\n\n        if (returnData.exchangeValue && parseFloat(returnData.exchangeValue) > 0) {\n          doc.text('Exchange Value:', 320, yPosition);\n          doc.text(`$${returnData.exchangeValue}`, 480, yPosition, { align: 'right' });\n          yPosition += 25;\n          \n          doc.moveTo(50, yPosition).lineTo(550, yPosition).stroke();\n          yPosition += 15;\n          \n          doc.fontSize(12).font('Helvetica-Bold');\n          if (returnData.refundAmount && parseFloat(returnData.refundAmount) > 0) {\n            doc.text('Refund Amount:', 320, yPosition);\n            doc.text(`$${returnData.refundAmount}`, 480, yPosition, { align: 'right' });\n          } else if (returnData.additionalPayment && parseFloat(returnData.additionalPayment) > 0) {\n            doc.text('Additional Payment:', 320, yPosition);\n            doc.text(`$${returnData.additionalPayment}`, 480, yPosition, { align: 'right' });\n          } else {\n            doc.text('Even Exchange:', 320, yPosition);\n            doc.text('$0.00', 480, yPosition, { align: 'right' });\n          }\n        } else {\n          doc.moveTo(50, yPosition).lineTo(550, yPosition).stroke();\n          yPosition += 15;\n          doc.fontSize(12).font('Helvetica-Bold');\n          doc.text('Refund Amount:', 320, yPosition);\n          doc.text(`$${returnData.refundAmount}`, 480, yPosition, { align: 'right' });\n        }\n\n        // Reason\n        if (returnData.reason) {\n          doc.moveDown(2);\n          doc.fontSize(10).font('Helvetica');\n          doc.text('Return Reason:', { underline: true });\n          doc.text(returnData.reason);\n        }\n\n        // Notes\n        if (returnData.notes) {\n          doc.moveDown();\n          doc.fontSize(10).font('Helvetica');\n          doc.text('Notes:', { underline: true });\n          doc.text(returnData.notes);\n        }\n\n        // Footer\n        doc.moveDown(3);\n        doc.fontSize(8).text('Thank you for your business!', { align: 'center' });\n\n        doc.end();\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n\n  generateInvoice(order: OrderWithItems): Promise<Buffer> {\n    return new Promise((resolve, reject) => {\n      try {\n        const doc = new PDFDocument({ margin: 50 });\n        const buffers: Buffer[] = [];\n\n        doc.on('data', buffers.push.bind(buffers));\n        doc.on('end', () => {\n          const pdfBuffer = Buffer.concat(buffers);\n          resolve(pdfBuffer);\n        });\n\n        // Header\n        doc.fontSize(20).text('INVOICE', { align: 'center' });\n        doc.moveDown();\n\n        // Order details\n        doc.fontSize(10);\n        doc.text(`Order Number: ${order.orderNumber}`, { align: 'right' });\n        doc.text(`Date: ${new Date(order.createdAt).toLocaleDateString()}`, { align: 'right' });\n        doc.moveDown();\n\n        // Customer details\n        doc.fontSize(12).text('Bill To:', { underline: true });\n        doc.fontSize(10);\n        doc.text(order.customerName);\n        if (order.customerEmail) doc.text(order.customerEmail);\n        if (order.customerPhone) doc.text(order.customerPhone);\n        doc.moveDown();\n\n        // Items table header\n        const tableTop = doc.y;\n        doc.fontSize(10).font('Helvetica-Bold');\n        doc.text('Item', 50, tableTop);\n        doc.text('SKU', 200, tableTop);\n        doc.text('Qty', 320, tableTop);\n        doc.text('Price', 380, tableTop);\n        doc.text('Total', 480, tableTop, { align: 'right' });\n        \n        doc.moveTo(50, tableTop + 15).lineTo(550, tableTop + 15).stroke();\n        \n        // Items\n        doc.font('Helvetica');\n        let yPosition = tableTop + 25;\n        \n        order.items.forEach((item) => {\n          doc.text(item.productName, 50, yPosition, { width: 140 });\n          doc.text(item.sku, 200, yPosition);\n          doc.text(item.quantity.toString(), 320, yPosition);\n          doc.text(`$${item.unitPrice}`, 380, yPosition);\n          doc.text(`$${item.subtotal}`, 480, yPosition, { align: 'right' });\n          yPosition += 25;\n        });\n\n        // Total\n        doc.moveTo(50, yPosition).lineTo(550, yPosition).stroke();\n        yPosition += 15;\n        doc.fontSize(12).font('Helvetica-Bold');\n        doc.text('Total:', 380, yPosition);\n        doc.text(`$${order.totalAmount}`, 480, yPosition, { align: 'right' });\n\n        // Notes\n        if (order.notes) {\n          doc.moveDown(2);\n          doc.fontSize(10).font('Helvetica');\n          doc.text('Notes:', { underline: true });\n          doc.text(order.notes);\n        }\n\n        // Footer\n        doc.moveDown(3);\n        doc.fontSize(8).text('Thank you for your business!', { align: 'center' });\n\n        doc.end();\n      } catch (error) {\n        reject(error);\n      }\n    });\n  }\n}\n\nexport const pdfService = new PDFService();\n","size_bytes":8967},"client/src/components/order-card.tsx":{"content":"import { useState } from \"react\";\nimport { format } from \"date-fns\";\nimport { Calendar, Package, User, Mail, Phone, Download, RotateCcw, FileText } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { CreateReturnDialog } from \"./create-return-dialog\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport type { OrderWithItems, ReturnWithItems } from \"@shared/schema\";\n\ninterface OrderCardProps {\n  order: OrderWithItems;\n}\n\nconst statusVariants = {\n  pending: \"secondary\" as const,\n  processing: \"default\" as const,\n  shipped: \"default\" as const,\n  delivered: \"default\" as const,\n  cancelled: \"destructive\" as const,\n};\n\nexport function OrderCard({ order }: OrderCardProps) {\n  const [returnDialogOpen, setReturnDialogOpen] = useState(false);\n  const { toast } = useToast();\n\n  const { data: returns = [] } = useQuery<ReturnWithItems[]>({\n    queryKey: [\"/api/returns\"],\n  });\n\n  const orderReturns = returns.filter(ret => ret.orderId === order.id);\n\n  const downloadInvoice = async () => {\n    try {\n      const response = await fetch(`/api/orders/${order.id}/invoice`);\n      if (!response.ok) throw new Error('Failed to download invoice');\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `invoice-${order.orderNumber}.pdf`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n\n      toast({\n        title: \"Success\",\n        description: \"Invoice downloaded successfully\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to download invoice\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const downloadReturnInvoice = async (returnId: string, returnNumber: string) => {\n    try {\n      const response = await fetch(`/api/returns/${returnId}/invoice`);\n      if (!response.ok) throw new Error('Failed to download return invoice');\n\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `return-invoice-${returnNumber}.pdf`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      document.body.removeChild(a);\n\n      toast({\n        title: \"Success\",\n        description: \"Return invoice downloaded successfully\",\n      });\n    } catch (error) {\n      toast({\n        title: \"Error\",\n        description: \"Failed to download return invoice\",\n        variant: \"destructive\",\n      });\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"delivered\":\n        return \"bg-green-100 text-green-800 border-green-200\";\n      case \"shipped\":\n        return \"bg-blue-100 text-blue-800 border-blue-200\";\n      case \"processing\":\n        return \"bg-yellow-100 text-yellow-800 border-yellow-200\";\n      case \"cancelled\":\n        return \"bg-red-100 text-red-800 border-red-200\";\n      default:\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\n    }\n  };\n\n  return (\n    <>\n    <Card className=\"hover-elevate transition-all\" data-testid={`card-order-${order.id}`}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex flex-col lg:flex-row lg:items-center gap-6\">\n          <div className=\"flex items-center gap-4 flex-1 min-w-0\">\n            <div className=\"w-14 h-14 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0\">\n              <Package className=\"h-7 w-7 text-primary\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <h3 className=\"font-semibold text-lg font-mono\" data-testid={`text-order-number-${order.id}`}>\n                  #{order.orderNumber}\n                </h3>\n                <Badge variant={statusVariants[order.status as keyof typeof statusVariants]} data-testid={`badge-status-${order.id}`}>\n                  {order.status.charAt(0).toUpperCase() + order.status.slice(1)}\n                </Badge>\n              </div>\n              <div className=\"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground\">\n                <div className=\"flex items-center gap-1.5\">\n                  <User className=\"h-3.5 w-3.5\" />\n                  <span data-testid={`text-customer-${order.id}`}>{order.customerName}</span>\n                </div>\n                {order.createdAt && (\n                  <div className=\"flex items-center gap-1.5\">\n                    <Calendar className=\"h-3.5 w-3.5\" />\n                    <span data-testid={`text-date-${order.id}`}>\n                      {format(new Date(order.createdAt), \"MMM dd, yyyy\")}\n                    </span>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-4 lg:gap-6\">\n            <div>\n              <p className=\"text-sm text-muted-foreground mb-1\">Total Amount</p>\n              <p className=\"text-2xl font-bold\" data-testid={`text-total-${order.id}`}>${order.totalAmount}</p>\n            </div>\n            <div className=\"w-px h-12 bg-border hidden sm:block\" />\n            <div>\n              <p className=\"text-sm text-muted-foreground mb-1\">Items</p>\n              <p className=\"text-lg font-semibold\" data-testid={`text-items-count-${order.id}`}>\n                {order.items.length} {order.items.length === 1 ? \"item\" : \"items\"}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {order.items.length > 0 && (\n          <div className=\"mt-4 pt-4 border-t\">\n            <p className=\"text-sm font-medium mb-2\">Order Items:</p>\n            <div className=\"space-y-2\">\n              {order.items.map((item, index) => (\n                <div\n                  key={item.id}\n                  className=\"flex items-center justify-between text-sm\"\n                  data-testid={`order-item-${order.id}-${index}`}\n                >\n                  <div className=\"flex-1 min-w-0\">\n                    <span className=\"font-medium\">{item.productName}</span>\n                    <span className=\"text-muted-foreground ml-2 font-mono text-xs\">\n                      ({item.sku})\n                    </span>\n                  </div>\n                  <div className=\"flex items-center gap-4 flex-shrink-0\">\n                    <span className=\"text-muted-foreground\">Qty: {item.quantity}</span>\n                    <span className=\"font-medium min-w-[80px] text-right\">${item.subtotal}</span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {order.notes && (\n          <div className=\"mt-4 pt-4 border-t\">\n            <p className=\"text-sm font-medium mb-1\">Notes:</p>\n            <p className=\"text-sm text-muted-foreground\" data-testid={`text-notes-${order.id}`}>{order.notes}</p>\n          </div>\n        )}\n\n        {orderReturns.length > 0 && (\n          <div className=\"mt-4 pt-4 border-t\">\n            <p className=\"text-sm font-medium mb-3\">Return/Exchange History:</p>\n            <div className=\"space-y-3\">\n              {orderReturns.map((ret) => (\n                <div key={ret.id} className=\"bg-muted/50 p-3 rounded-lg space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"font-mono text-sm font-medium\">{ret.returnNumber}</span>\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        {ret.status}\n                      </Badge>\n                    </div>\n                    <span className=\"text-xs text-muted-foreground\">\n                      {format(new Date(ret.createdAt), \"MMM dd, yyyy\")}\n                    </span>\n                  </div>\n                  <div className=\"space-y-1 text-sm\">\n                    {ret.items.map((item) => (\n                      <div key={item.id} className=\"flex justify-between items-start\">\n                        <div className=\"flex-1\">\n                          <span className=\"text-muted-foreground\">Returned: </span>\n                          <span>{item.productName} (x{item.quantity})</span>\n                          {item.exchangeProductName && (\n                            <div className=\"ml-2 text-xs text-blue-600\">\n                              ↻ Exchanged for: {item.exchangeProductName}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"flex justify-between items-center pt-2 border-t border-border/50 text-sm\">\n                    <div className=\"space-y-1\">\n                      {ret.exchangeValue && parseFloat(ret.exchangeValue) > 0 && (\n                        <div className=\"text-muted-foreground\">\n                          Exchange Value: <span className=\"font-medium\">${ret.exchangeValue}</span>\n                        </div>\n                      )}\n                      {ret.refundAmount && parseFloat(ret.refundAmount) > 0 && (\n                        <div className=\"text-green-600\">\n                          Refunded: <span className=\"font-semibold\">${ret.refundAmount}</span>\n                        </div>\n                      )}\n                      {ret.additionalPayment && parseFloat(ret.additionalPayment) > 0 && (\n                        <div className=\"text-orange-600\">\n                          Additional Payment: <span className=\"font-semibold\">${ret.additionalPayment}</span>\n                        </div>\n                      )}\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => downloadReturnInvoice(ret.id, ret.returnNumber)}\n                    >\n                      <FileText className=\"h-4 w-4 mr-2\" />\n                      Invoice\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </CardContent>\n\n      <div className=\"mt-4 pt-4 border-t flex gap-2\">\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={downloadInvoice}\n          className=\"flex-1\"\n        >\n          <Download className=\"h-4 w-4 mr-2\" />\n          Download Invoice\n        </Button>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => setReturnDialogOpen(true)}\n          className=\"flex-1\"\n        >\n          <RotateCcw className=\"h-4 w-4 mr-2\" />\n          Create Return\n        </Button>\n      </div>\n    </Card>\n\n    <CreateReturnDialog\n      open={returnDialogOpen}\n      onOpenChange={setReturnDialogOpen}\n      order={order}\n    />\n    </>\n  );\n}","size_bytes":11182},"client/src/components/navigation.tsx":{"content":"import { Package, ShoppingCart, TrendingUp, Ticket } from \"lucide-react\";\nimport { Link, useRoute } from \"wouter\";\nimport { cn } from \"@/lib/utils\";\n\nexport function Navigation() {\n  const [isInventory] = useRoute(\"/\");\n  const [isOrders] = useRoute(\"/orders\");\n  const [isStock] = useRoute(\"/stock-history\");\n  const [isStoreCredits] = useRoute(\"/store-credits\");\n\n  return (\n    <nav className=\"border-b bg-background\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex items-center justify-between h-16\">\n          <div className=\"flex items-center gap-8\">\n            <div className=\"flex items-center gap-2\">\n              <Package className=\"h-6 w-6 text-primary\" />\n              <span className=\"text-xl font-bold\">FABRIX</span>\n            </div>\n            <div className=\"flex gap-1\">\n              <Link href=\"/\">\n                <div\n                  className={cn(\n                    \"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors cursor-pointer\",\n                    isInventory\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"text-muted-foreground hover:text-foreground hover:bg-muted\"\n                  )}\n                >\n                  <Package className=\"h-4 w-4\" />\n                  <span>Inventory</span>\n                </div>\n              </Link>\n              <Link href=\"/orders\">\n                <div\n                  className={cn(\n                    \"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors cursor-pointer\",\n                    isOrders\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"text-muted-foreground hover:text-foreground hover:bg-muted\"\n                  )}\n                >\n                  <ShoppingCart className=\"h-4 w-4\" />\n                  <span>Orders</span>\n                </div>\n              </Link>\n              <Link href=\"/stock-history\">\n                <div\n                  className={cn(\n                    \"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors cursor-pointer\",\n                    isStock\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"text-muted-foreground hover:text-foreground hover:bg-muted\"\n                  )}\n                >\n                  <TrendingUp className=\"h-4 w-4\" />\n                  <span>Stock History</span>\n                </div>\n              </Link>\n              <Link href=\"/store-credits\">\n                <div\n                  className={cn(\n                    \"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors cursor-pointer\",\n                    isStoreCredits\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"text-muted-foreground hover:text-foreground hover:bg-muted\"\n                  )}\n                >\n                  <Ticket className=\"h-4 w-4\" />\n                  <span>Store Credits</span>\n                </div>\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  );\n}","size_bytes":3160},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 100%;\n\n  --foreground: 220 10% 15%;\n\n  --border: 220 12% 88%;\n\n  --card: 220 8% 98%;\n\n  --card-foreground: 220 10% 15%;\n\n  --card-border: 220 12% 94%;\n\n  --sidebar: 220 10% 96%;\n\n  --sidebar-foreground: 220 10% 15%;\n\n  --sidebar-border: 220 12% 92%;\n\n  --sidebar-primary: 210 90% 48%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 220 15% 92%;\n\n  --sidebar-accent-foreground: 220 12% 20%;\n\n  --sidebar-ring: 210 90% 48%;\n\n  --popover: 220 12% 94%;\n\n  --popover-foreground: 220 10% 15%;\n\n  --popover-border: 220 14% 90%;\n\n  --primary: 210 90% 48%;\n\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 220 14% 90%;\n\n  --secondary-foreground: 220 12% 20%;\n\n  --muted: 220 15% 92%;\n\n  --muted-foreground: 220 10% 42%;\n\n  --accent: 220 18% 90%;\n\n  --accent-foreground: 220 12% 20%;\n\n  --destructive: 0 72% 51%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 220 15% 75%;\n  --ring: 210 90% 48%;\n  --chart-1: 210 85% 45%;\n  --chart-2: 165 75% 42%;\n  --chart-3: 280 65% 55%;\n  --chart-4: 35 85% 52%;\n  --chart-5: 15 78% 58%;\n\n  --font-sans: Inter, -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: \"Roboto Mono\", Menlo, Monaco, \"Courier New\", monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 1px 2px 0px hsl(220 10% 15% / 0.04);\n  --shadow-xs: 0px 1px 3px 0px hsl(220 10% 15% / 0.08);\n  --shadow-sm: 0px 2px 4px -1px hsl(220 10% 15% / 0.06), 0px 1px 2px -1px hsl(220 10% 15% / 0.04);\n  --shadow: 0px 4px 6px -1px hsl(220 10% 15% / 0.08), 0px 2px 4px -1px hsl(220 10% 15% / 0.04);\n  --shadow-md: 0px 6px 12px -2px hsl(220 10% 15% / 0.10), 0px 3px 6px -2px hsl(220 10% 15% / 0.05);\n  --shadow-lg: 0px 10px 20px -4px hsl(220 10% 15% / 0.12), 0px 4px 8px -2px hsl(220 10% 15% / 0.06);\n  --shadow-xl: 0px 20px 30px -6px hsl(220 10% 15% / 0.14), 0px 8px 12px -4px hsl(220 10% 15% / 0.08);\n  --shadow-2xl: 0px 30px 50px -12px hsl(220 10% 15% / 0.18);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 220 12% 9%;\n\n  --foreground: 220 8% 92%;\n\n  --border: 220 10% 20%;\n\n  --card: 220 10% 12%;\n\n  --card-foreground: 220 8% 92%;\n\n  --card-border: 220 10% 16%;\n\n  --sidebar: 220 11% 14%;\n\n  --sidebar-foreground: 220 8% 92%;\n\n  --sidebar-border: 220 10% 18%;\n\n  --sidebar-primary: 210 88% 52%;\n\n  --sidebar-primary-foreground: 220 12% 9%;\n\n  --sidebar-accent: 220 12% 18%;\n\n  --sidebar-accent-foreground: 220 8% 88%;\n\n  --sidebar-ring: 210 88% 52%;\n\n  --popover: 220 11% 16%;\n\n  --popover-foreground: 220 8% 92%;\n\n  --popover-border: 220 10% 20%;\n\n  --primary: 210 88% 52%;\n\n  --primary-foreground: 220 12% 9%;\n\n  --secondary: 220 12% 20%;\n\n  --secondary-foreground: 220 8% 88%;\n\n  --muted: 220 12% 18%;\n\n  --muted-foreground: 220 8% 65%;\n\n  --accent: 220 14% 20%;\n\n  --accent-foreground: 220 8% 88%;\n\n  --destructive: 0 70% 55%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 220 12% 35%;\n  --ring: 210 88% 52%;\n  --chart-1: 210 90% 65%;\n  --chart-2: 165 80% 58%;\n  --chart-3: 280 70% 68%;\n  --chart-4: 35 88% 62%;\n  --chart-5: 15 82% 68%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.16);\n  --shadow-xs: 0px 1px 3px 0px hsl(0 0% 0% / 0.24);\n  --shadow-sm: 0px 2px 4px -1px hsl(0 0% 0% / 0.20), 0px 1px 2px -1px hsl(0 0% 0% / 0.16);\n  --shadow: 0px 4px 6px -1px hsl(0 0% 0% / 0.28), 0px 2px 4px -1px hsl(0 0% 0% / 0.16);\n  --shadow-md: 0px 6px 12px -2px hsl(0 0% 0% / 0.32), 0px 3px 6px -2px hsl(0 0% 0% / 0.20);\n  --shadow-lg: 0px 10px 20px -4px hsl(0 0% 0% / 0.36), 0px 4px 8px -2px hsl(0 0% 0% / 0.24);\n  --shadow-xl: 0px 20px 30px -6px hsl(0 0% 0% / 0.42), 0px 8px 12px -4px hsl(0 0% 0% / 0.28);\n  --shadow-2xl: 0px 30px 50px -12px hsl(0 0% 0% / 0.50);\n\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n\n  /* QR Code Scanner Video Styles */\n  #qr-reader {\n    position: relative;\n    width: 100%;\n  }\n\n  #qr-reader video {\n    width: 100% !important;\n    height: auto !important;\n    display: block !important;\n    border-radius: 0.5rem;\n  }\n\n  #qr-reader__dashboard {\n    display: none !important;\n  }\n\n  #qr-reader__dashboard_section {\n    display: none !important;\n  }\n}","size_bytes":10287},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport Inventory from \"@/pages/inventory\";\nimport Orders from \"@/pages/orders\";\nimport NotFound from \"@/pages/not-found\";\nimport StockHistory from \"@/pages/stock-history\";\nimport StoreCredits from \"@/pages/store-credits\";\nimport { Navigation } from \"@/components/navigation\";\nimport { Footer } from \"@/components/footer\";\n\nfunction Router() {\n  return (\n    <Switch>\n      <Route path=\"/\" component={Inventory} />\n      <Route path=\"/orders\" component={Orders} />\n      <Route path=\"/stock-history\" component={StockHistory} />\n      <Route path=\"/store-credits\" component={StoreCredits} />\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <div className=\"flex flex-col h-screen\">\n          <Navigation />\n          <main className=\"flex-1 overflow-hidden\">\n            <Router />\n          </main>\n          <Footer />\n        </div>\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;","size_bytes":1310},"client/src/components/qr-scanner-dialog.tsx":{"content":"import { useEffect, useRef, useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { Html5Qrcode } from \"html5-qrcode\";\nimport { X, Camera, Package, Scan } from \"lucide-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Alert, AlertDescription } from \"@/components/ui/alert\";\nimport type { Product } from \"@shared/schema\";\nimport { useToast } from \"@/hooks/use-toast\";\n\ninterface QRScannerDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onProductScanned?: (product: Product) => void;\n}\n\nexport function QRScannerDialog({ open, onOpenChange, onProductScanned }: QRScannerDialogProps) {\n  const [scannedSKU, setScannedSKU] = useState<string>(\"\");\n  const [manualSKU, setManualSKU] = useState(\"\");\n  const [isScanning, setIsScanning] = useState(false);\n  const [barcodeBuffer, setBarcodeBuffer] = useState(\"\");\n  const [lastKeyTime, setLastKeyTime] = useState(0);\n  const scannerRef = useRef<Html5Qrcode | null>(null);\n  const mountedRef = useRef(false);\n  const { toast } = useToast();\n\n  const { data: products = [] } = useQuery<Product[]>({\n    queryKey: [\"/api/products\"],\n  });\n\n  const scannedProduct = products.find((p) => p.sku === scannedSKU);\n\n  useEffect(() => {\n    mountedRef.current = true;\n    return () => {\n      mountedRef.current = false;\n    };\n  }, []);\n\n  // Handle physical barcode scanner input\n  useEffect(() => {\n    if (!open) return;\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n      const currentTime = Date.now();\n      const timeDiff = currentTime - lastKeyTime;\n\n      // If more than 100ms between keypresses, start new barcode\n      if (timeDiff > 100) {\n        setBarcodeBuffer(\"\");\n      }\n\n      setLastKeyTime(currentTime);\n\n      // Enter key indicates end of barcode scan\n      if (e.key === \"Enter\" && barcodeBuffer.length > 0) {\n        e.preventDefault();\n        setScannedSKU(barcodeBuffer);\n        setBarcodeBuffer(\"\");\n        return;\n      }\n\n      // Build up the barcode from rapid keystrokes\n      if (e.key.length === 1 && timeDiff < 100) {\n        setBarcodeBuffer((prev) => prev + e.key);\n      }\n    };\n\n    window.addEventListener(\"keypress\", handleKeyPress);\n    return () => window.removeEventListener(\"keypress\", handleKeyPress);\n  }, [open, barcodeBuffer, lastKeyTime]);\n\n  // Auto-select product if callback provided\n  useEffect(() => {\n    if (scannedProduct && onProductScanned) {\n      onProductScanned(scannedProduct);\n      // Close the dialog after successful scan to prevent duplicates\n      handleClose();\n    }\n  }, [scannedProduct, onProductScanned]);\n\n  const startScanning = async () => {\n    if (isScanning || scannerRef.current) {\n      return;\n    }\n\n    const element = document.getElementById(\"qr-reader\");\n    if (!element) {\n      console.error(\"QR reader element not found\");\n      return;\n    }\n\n    try {\n      setIsScanning(true);\n      const scanner = new Html5Qrcode(\"qr-reader\");\n      scannerRef.current = scanner;\n\n      // Get available cameras first\n      const devices = await Html5Qrcode.getCameras();\n\n      if (!devices || devices.length === 0) {\n        console.error(\"No cameras found\");\n        toast({\n          title: \"Camera Error\",\n          description: \"No cameras found on this device.\",\n          variant: \"destructive\",\n        });\n        setIsScanning(false);\n        return;\n      }\n\n      // Use the first available camera (usually back camera on mobile)\n      const cameraId = devices[0].id;\n\n      await scanner.start(\n        cameraId,\n        {\n          fps: 10,\n          qrbox: { width: 250, height: 250 },\n          aspectRatio: 1.0,\n        },\n        (decodedText) => {\n          if (mountedRef.current) {\n            setScannedSKU(decodedText);\n            stopScanning();\n          }\n        },\n        (errorMessage) => {\n          // Suppress scanning errors\n        }\n      );\n    } catch (err: any) {\n      console.error(\"Failed to start scanner:\", err);\n      if (mountedRef.current) {\n        toast({\n          title: \"Camera Error\",\n          description: \"Failed to access camera. Please ensure camera permissions are granted.\",\n          variant: \"destructive\",\n        });\n        setIsScanning(false);\n        scannerRef.current = null;\n      }\n    }\n  };\n\n  const stopScanning = async () => {\n    if (!scannerRef.current) {\n      return;\n    }\n\n    try {\n      const scanner = scannerRef.current;\n      scannerRef.current = null;\n      setIsScanning(false);\n\n      if (scanner.isScanning) {\n        await scanner.stop();\n      }\n      scanner.clear();\n    } catch (err: any) {\n      // Ignore errors during cleanup\n      scannerRef.current = null;\n      setIsScanning(false);\n    }\n  };\n\n  const handleManualSearch = () => {\n    if (manualSKU.trim()) {\n      setScannedSKU(manualSKU.trim());\n    }\n  };\n\n  const handleClose = () => {\n    stopScanning();\n    onOpenChange(false);\n    setScannedSKU(\"\");\n    setManualSKU(\"\");\n    setBarcodeBuffer(\"\");\n  };\n\n  useEffect(() => {\n    if (!open) {\n      handleClose();\n    }\n  }, [open]);\n\n  useEffect(() => {\n    return () => {\n      // Cleanup on unmount\n      if (scannerRef.current) {\n        try {\n          scannerRef.current.stop().catch(() => {});\n          scannerRef.current.clear();\n        } catch (err) {\n          // Ignore cleanup errors\n        }\n        scannerRef.current = null;\n      }\n    };\n  }, []);\n\n  return (\n    <Dialog open={open} onOpenChange={handleClose}>\n      <DialogContent className=\"max-w-2xl\" data-testid=\"dialog-qr-scanner\">\n        <DialogHeader>\n          <DialogTitle>Scan Product Code</DialogTitle>\n          <DialogDescription>\n            Use your device camera or a physical barcode scanner\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          <Alert>\n            <Scan className=\"h-4 w-4\" />\n            <AlertDescription>\n              Physical barcode scanner detected: Ready to scan barcodes (1D & 2D)\n            </AlertDescription>\n          </Alert>\n          {!scannedProduct ? (\n            <>\n              <div className=\"space-y-4\">\n                <div\n                  id=\"qr-reader\"\n                  className=\"w-full rounded-lg overflow-hidden\"\n                  style={{ \n                    minHeight: \"400px\",\n                    display: isScanning ? \"block\" : \"none\"\n                  }}\n                />\n\n                {!isScanning && (\n                  <Card className=\"border-dashed\">\n                    <CardContent className=\"flex flex-col items-center justify-center py-12\">\n                      <div className=\"rounded-full bg-muted p-6 mb-4\">\n                        <Camera className=\"h-10 w-10 text-muted-foreground\" />\n                      </div>\n                      <p className=\"text-sm text-muted-foreground mb-4\">\n                        Click the button below to start scanning\n                      </p>\n                      <Button onClick={startScanning} data-testid=\"button-start-scan\">\n                        <Camera className=\"h-4 w-4 mr-2\" />\n                        Start Camera\n                      </Button>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <span className=\"w-full border-t\" />\n                </div>\n                <div className=\"relative flex justify-center text-xs uppercase\">\n                  <span className=\"bg-background px-2 text-muted-foreground\">\n                    Or enter manually\n                  </span>\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                <Label htmlFor=\"manual-sku\">Enter SKU</Label>\n                <div className=\"flex gap-2\">\n                  <Input\n                    id=\"manual-sku\"\n                    value={manualSKU}\n                    onChange={(e) => setManualSKU(e.target.value)}\n                    placeholder=\"Enter product SKU...\"\n                    onKeyDown={(e) => {\n                      if (e.key === \"Enter\") {\n                        handleManualSearch();\n                      }\n                    }}\n                    data-testid=\"input-manual-sku\"\n                  />\n                  <Button onClick={handleManualSearch} data-testid=\"button-search-sku\">\n                    Search\n                  </Button>\n                </div>\n              </div>\n\n              {scannedSKU && !scannedProduct && (\n                <Card className=\"border-destructive\">\n                  <CardContent className=\"p-4\">\n                    <p className=\"text-sm text-destructive\" data-testid=\"text-product-not-found\">\n                      No product found with SKU: <span className=\"font-mono\">{scannedSKU}</span>\n                    </p>\n                  </CardContent>\n                </Card>\n              )}\n            </>\n          ) : (\n            <Card>\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-start gap-6\">\n                  <div className=\"w-24 h-24 rounded-md bg-muted flex items-center justify-center overflow-hidden flex-shrink-0\">\n                    {scannedProduct.productImage ? (\n                      <img\n                        src={scannedProduct.productImage}\n                        alt={scannedProduct.productName}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <Package className=\"h-10 w-10 text-muted-foreground\" />\n                    )}\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"text-xl font-semibold mb-2\" data-testid=\"text-found-product-name\">\n                      {scannedProduct.productName}\n                    </h3>\n                    <div className=\"space-y-1 text-sm text-muted-foreground\">\n                      <p className=\"font-mono\" data-testid=\"text-found-sku\">SKU: {scannedProduct.sku}</p>\n                      <p>{scannedProduct.brand} • {scannedProduct.category}</p>\n                      <p>{scannedProduct.size} • {scannedProduct.color}</p>\n                    </div>\n                    <div className=\"mt-4\">\n                      <p className=\"text-2xl font-bold\">${scannedProduct.price}</p>\n                      <p className=\"text-sm text-muted-foreground\" data-testid=\"text-found-stock\">\n                        Stock: {scannedProduct.stockQuantity} units\n                      </p>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"mt-6 flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    className=\"flex-1\"\n                    onClick={() => {\n                      setScannedSKU(\"\");\n                      setManualSKU(\"\");\n                    }}\n                    data-testid=\"button-scan-another\"\n                  >\n                    Scan Another\n                  </Button>\n                  <Button\n                    className=\"flex-1\"\n                    onClick={() => onOpenChange(false)}\n                    data-testid=\"button-close-scanner\"\n                  >\n                    Close\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":11741},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2210},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359}},"version":2}